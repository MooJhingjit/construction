webpackJsonp([2],{GAhw:function(t,e){},LdtD:function(t,e){},"M+++":function(t,e){},jPr8:function(t,e){},lmGy:function(t,e,a){"use strict";var l=a("Xxa5"),r=a.n(l),i=a("exGp"),o=a.n(i),n=a("ikD4"),s={props:{objInputs:{type:Object,required:!0},resourceName:{type:String,required:!0},itemSelected:{type:Array,required:!1}},data:function(){return{local:{data:[],filteredTags:[],isSelectOnly:!1,tags:[],maxDefault:this.maxtags||20}}},computed:{},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return o()(r.a.mark(function e(){var a,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.resourceName,e.next=3,n.a.getResource({resourceName:a,queryString:[t.BUILDPARAM({type:"selection"})]});case 3:l=e.sent,t.local.data=l.data,t.getFilterResult();case 6:case"end":return e.stop()}},e,t)}))()},getFilteredTags:function(t){this.local.filteredTags=this.local.data.filter(function(e){return e.name.indexOf(t)>=0})},changeItems:function(){var t=[];this.local.tags.map(function(e){t.push(e.id)}),this.$emit("selected",t)},getFilterResult:function(){var t=this;if(null===this.itemSelected||void 0===this.itemSelected)return[];this.local.tags=this.local.data.filter(function(e){return t.itemSelected.includes(e.id)})}},watch:{itemSelected:function(){this.getFilterResult()}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("b-dropdown",[a("button",{staticClass:"button",attrs:{slot:"trigger"},slot:"trigger"},[a("b-icon",{attrs:{icon:"list"}})],1),t._v(" "),a("section",[a("b-field",{attrs:{label:t.objInputs.label}},[a("b-taginput",{attrs:{maxtags:t.objInputs.maxtags,data:t.local.filteredTags,autocomplete:"",field:"name",icon:"search",placeholder:t.objInputs.placeholder},on:{add:t.changeItems,remove:t.changeItems,typing:t.getFilteredTags},scopedSlots:t._u([{key:"default",fn:function(e){return[a("strong",[t._v(t._s(e.option.name))])]}}]),model:{value:t.local.tags,callback:function(e){t.$set(t.local,"tags",e)},expression:"local.tags"}},[a("template",{slot:"empty"},[t._v("\n                  ไม่พบข้อมูล\n              ")])],2)],1)],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(s,c,!1,function(t){a("jPr8")},"data-v-8c4086f6",null);e.a=u.exports},yPOr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("Xxa5"),r=a.n(l),i=a("exGp"),o=a.n(i),n=a("ujS/"),s=a("kVPM"),c=a("ikD4"),u=a("Tdo9"),d=a("7Dwl"),m=a("7x59"),p=a("lmGy"),h={name:"materialTempalte",components:{myInput:d.a,myAction:m.a,myTagsSelection:p.a},props:{obj:{type:Object,required:!0}},computed:{inputsItem:function(){return this.local.items.length,this.local.items},materialGroupResource:function(){return s.a.api.materialGroup.index}},data:function(){return{local:{items:[],colorSelected:{leftColor:"",rightColor:""},itemsTemplate:{id:null,name:"",delay:"",unit:"",amount:1,price:"",materialGroup:[],l_default:{},r_default:{}},materialGroupAll:[],materialDelayAll:""}}},created:function(){this.fetchData(),this.local.colorSelected.leftColor="defalut",this.local.colorSelected.rightColor="defalut"},updated:function(){},methods:{fetchData:function(){var t=this;return o()(r.a.mark(function e(){var a,l,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.BUILDPARAM({house:t.obj.houseTemplate.key}),l=s.a.api.material.index+"/"+t.obj.storeId,e.next=4,c.a.getResource({resourceName:l,queryString:a});case 4:i=e.sent,t.local.items=i.data,t.setMaterialGroup(),t.setMaterialDelay();case 8:case"end":return e.stop()}},e,t)}))()},editRow:function(t){if("add"===t){var e={};for(var a in this.local.itemsTemplate.l_default)e[a]="";var l={};for(var r in this.local.itemsTemplate.r_default)l[r]="";this.local.items.push({id:"",name:"",delay:"",unit:"",amount:1,price:"",materialGroup:[],l_default:e,r_default:l}),this.addMaterialToGroup(this.local.materialGroupAll),this.addMaterialDelay(this.local.materialDelayAll)}else this.local.items.pop()},submitForm:function(t){var e=this;return o()(r.a.mark(function a(){var l,i,o,n,u;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=""+s.a.api.material.index,a.next=3,e.$validator.validateAll();case 3:i=a.sent,o=null,a.t0=t,a.next="delete"===a.t0?8:"update"===a.t0?15:22;break;case 8:return n=e.BUILDPARAM({storeId:e.obj.storeId,houseId:e.obj.houseTemplate.key}),a.next=11,c.a.deleteResource({resourceName:l,queryString:n});case 11:return o=a.sent,e.local.items=[],e.local.materialGroupAll=[],a.abrupt("break",22);case 15:if(i&&e.local.items.length){a.next=17;break}return a.abrupt("return");case 17:return u=e.setDataFormat(),a.next=20,c.a.postResource({data:u,resourceName:l});case 20:return o=a.sent,a.abrupt("break",22);case 22:if(200!==o.status){a.next=26;break}return e.NOTIFY("success"),e.fetchData(),a.abrupt("return");case 26:e.NOTIFY("error");case 27:case"end":return a.stop()}},a,e)}))()},setDataFormat:function(){var t=this,e=this.local.items.map(function(e){return{id:e.id,name:e.name,delay:e.delay,unit:e.unit,storeId:t.obj.storeId,houseId:t.obj.houseTemplate.key,amount:e.amount,price:e.price,materialGroup:e.materialGroup,priceDetail:{l_default:e.l_default,r_default:e.r_default}}});return{houseId:this.obj.houseTemplate.key,storeId:this.obj.storeId,detail:e}},setRightColor:function(){var t=this.local.colorSelected.rightColor;this.local.itemsTemplate.r_default.hasOwnProperty(t)||(this.local.itemsTemplate.r_default[t]="",this.local.items.map(function(e){e.r_default.hasOwnProperty(t)||(e.r_default[t]="")}))},setLeftColor:function(){var t=this.local.colorSelected.leftColor;this.local.itemsTemplate.l_default.hasOwnProperty(t)||(this.local.itemsTemplate.l_default[t]="",this.local.items.map(function(e){e.l_default.hasOwnProperty(t)||(e.l_default[t]="")}))},setMaterialGroup:function(){this.local.items.length&&(this.local.materialGroupAll=this.local.items[0].materialGroup)},setMaterialDelay:function(){this.local.items.length&&(this.local.materialDelayAll=this.local.items[0].delay)},addMaterialToGroup:function(t){this.local.materialGroupAll=t,this.local.items.map(function(e){e.materialGroup=t})},addMaterialDelay:function(t){this.local.materialDelayAll=t,this.local.items.map(function(e){e.delay=t})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-template"},[a("table",{staticClass:"table is-hoverable"},[t._m(0),t._v(" "),a("tbody",t._l(t.inputsItem,function(e,l){return a("tr",{key:l},[a("td",[a("my-input",{attrs:{value:e.name,inputObj:{type:"text",name:"name_"+l,placeholder:"รายการ",validate:"required"},validator:t.$validator},on:{input:function(t){e.name=t}}})],1),t._v(" "),a("td",[a("my-input",{attrs:{value:e.amount,inputObj:{type:"text",name:"amount_"+l,placeholder:"หน่วย",validate:"required"},validator:t.$validator},on:{input:function(t){e.amount=t}}})],1),t._v(" "),a("td",[a("my-input",{attrs:{value:e.unit,inputObj:{type:"text",name:"unit_"+l,placeholder:"",validate:""},validator:t.$validator},on:{input:function(t){e.unit=t}}})],1),t._v(" "),a("td",[a("my-input",{attrs:{value:e.price,inputObj:{type:"text",name:"price_"+l,placeholder:"ราคา/หน่วย",validate:""},validator:t.$validator},on:{input:function(t){e.price=t}}})],1),t._v(" "),a("td",[a("my-input",{attrs:{value:e.l_default[t.local.colorSelected.leftColor],inputObj:{type:"text",name:"left_"+l,placeholder:"ซ้าย",validate:""},validator:t.$validator},on:{input:function(a){e.l_default[t.local.colorSelected.leftColor]=a}}})],1),t._v(" "),a("td",[a("my-input",{attrs:{value:e.r_default[t.local.colorSelected.rightColor],inputObj:{type:"text",name:"right_"+l,placeholder:"ขวา",validate:""},validator:t.$validator},on:{input:function(a){e.r_default[t.local.colorSelected.rightColor]=a}}})],1)])}))]),t._v(" "),a("div",{staticClass:"item-footer container-block"},[a("div",{staticClass:"container-block block right options"},[a("div",{staticClass:"delay container-block"},[a("label",{attrs:{for:""}},[t._v("กำหนดสั่ง")]),t._v(" "),a("div",{staticClass:"delay-input"},[a("my-input",{attrs:{value:t.local.materialDelayAll,inputObj:{type:"text",name:"order_delay",placeholder:"กำหนดสั่ง",validate:""},validator:t.$validator},on:{input:t.addMaterialDelay}})],1)]),t._v(" "),a("div",{staticClass:"material-group"},[this.local.items.length?a("my-tags-selection",{ref:"materialGroup",attrs:{objInputs:{label:"เลือกกลุ่มวัสดุ",placeholder:"เพิ่มกลุ่มวัสดุ"},resourceName:t.materialGroupResource,itemSelected:t.local.materialGroupAll},on:{selected:t.addMaterialToGroup}}):t._e()],1),t._v(" "),a("button",{staticClass:"button",on:{click:function(e){t.editRow("remove")}}},[a("i",{staticClass:"fa fa-minus",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("button",{staticClass:"button",on:{click:function(e){t.editRow("add")}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]),t._v(" "),this.local.items.length?a("div",{staticClass:"container-block block action"},[a("my-action",{attrs:{type:"update",obj:{title:"บันทึกข้อมูล"}},on:{clickEvent:function(e){t.submitForm("update")}}}),t._v(" "),a("my-action",{attrs:{type:"delete",obj:{title:"ลบข้อมูล"}},on:{clickEvent:function(e){t.submitForm("delete")}}})],1):t._e()])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("รายการ")]),t._v(" "),a("th",{attrs:{width:"80"}},[t._v("จำนวนเริ่มต้น")]),t._v(" "),a("th",{attrs:{width:"80"}},[t._v("หน่วย")]),t._v(" "),a("th",{attrs:{width:"80"}},[t._v("ราคา/หน่วย")]),t._v(" "),a("th",{attrs:{width:"80"}},[t._v("ซ้าย")]),t._v(" "),a("th",{attrs:{width:"80"}},[t._v("ขวา")])])])}]};var v=a("VU/8")(h,f,!1,function(t){a("M+++")},"data-v-e6a814e4",null).exports,_={name:"materialTempalte",components:{myInput:d.a,myAction:m.a,myTagsSelection:p.a},props:{obj:{type:Object,required:!0}},computed:{inputsItem:function(){return this.local.items.length,this.local.items},materialGroupResource:function(){return s.a.api.materialGroup.index}},data:function(){return{local:{items:[],colorSelected:{leftColor:"",rightColor:""},itemsTemplate:{id:null,name:"",delay:"",unit:"",amount:1,price:"",materialGroup:[],l_default:{},r_default:{}},materialGroupAll:[],materialDelayAll:""}}},created:function(){this.fetchData(),this.local.colorSelected.leftColor=this.HOUSECOLOR[0].key,this.local.colorSelected.rightColor=this.HOUSECOLOR[0].key},updated:function(){},methods:{fetchData:function(){var t=this;return o()(r.a.mark(function e(){var a,l,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.BUILDPARAM({house:t.obj.houseTemplate.key}),l=s.a.api.material.index+"/"+t.obj.storeId,e.next=4,c.a.getResource({resourceName:l,queryString:a});case 4:i=e.sent,t.local.items=i.data,t.setMaterialGroup(),t.setMaterialDelay();case 8:case"end":return e.stop()}},e,t)}))()},editRow:function(t){if("add"===t){var e={};for(var a in this.local.itemsTemplate.l_default)e[a]="";var l={};for(var r in this.local.itemsTemplate.r_default)l[r]="";this.local.items.push({id:"",name:"",delay:"",unit:"",amount:1,price:"",materialGroup:[],l_default:e,r_default:l}),this.addMaterialToGroup(this.local.materialGroupAll),this.addMaterialDelay(this.local.materialDelayAll)}else this.local.items.pop()},submitForm:function(t){var e=this;return o()(r.a.mark(function a(){var l,i,o,n,u;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=""+s.a.api.material.index,a.next=3,e.$validator.validateAll();case 3:i=a.sent,o=null,a.t0=t,a.next="delete"===a.t0?8:"update"===a.t0?15:22;break;case 8:return n=e.BUILDPARAM({storeId:e.obj.storeId,houseId:e.obj.houseTemplate.key}),a.next=11,c.a.deleteResource({resourceName:l,queryString:n});case 11:return o=a.sent,e.local.items=[],e.local.materialGroupAll=[],a.abrupt("break",22);case 15:if(i&&e.local.items.length){a.next=17;break}return a.abrupt("return");case 17:return u=e.setDataFormat(),a.next=20,c.a.postResource({data:u,resourceName:l});case 20:return o=a.sent,a.abrupt("break",22);case 22:if(200!==o.status){a.next=26;break}return e.NOTIFY("success"),e.fetchData(),a.abrupt("return");case 26:e.NOTIFY("error");case 27:case"end":return a.stop()}},a,e)}))()},setDataFormat:function(){var t=this,e=this.local.items.map(function(e){return{id:e.id,name:e.name,delay:e.delay,unit:e.unit,storeId:t.obj.storeId,houseId:t.obj.houseTemplate.key,amount:e.amount,price:e.price,materialGroup:e.materialGroup,priceDetail:{l_default:e.l_default,r_default:e.r_default}}});return{houseId:this.obj.houseTemplate.key,storeId:this.obj.storeId,detail:e}},setRightColor:function(){var t=this.local.colorSelected.rightColor;this.local.itemsTemplate.r_default.hasOwnProperty(t)||(this.local.itemsTemplate.r_default[t]="",this.local.items.map(function(e){e.r_default.hasOwnProperty(t)||(e.r_default[t]="")}))},setLeftColor:function(){var t=this.local.colorSelected.leftColor;this.local.itemsTemplate.l_default.hasOwnProperty(t)||(this.local.itemsTemplate.l_default[t]="",this.local.items.map(function(e){e.l_default.hasOwnProperty(t)||(e.l_default[t]="")}))},setMaterialGroup:function(){this.local.items.length&&(this.local.materialGroupAll=this.local.items[0].materialGroup)},setMaterialDelay:function(){this.local.items.length&&(this.local.materialDelayAll=this.local.items[0].delay)},addMaterialToGroup:function(t){this.local.materialGroupAll=t,this.local.items.map(function(e){e.materialGroup=t})},addMaterialDelay:function(t){this.local.materialDelayAll=t,this.local.items.map(function(e){e.delay=t})}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-template"},[a("table",{staticClass:"table is-hoverable"},[a("thead",[a("tr",[a("th",[t._v("รายการ")]),t._v(" "),a("th",{attrs:{width:"80"}},[t._v("จำนวนเริ่มต้น")]),t._v(" "),a("th",{attrs:{width:"80"}},[t._v("หน่วย")]),t._v(" "),a("th",{attrs:{width:"80"}},[t._v("ราคา/หน่วย")]),t._v(" "),a("th",{attrs:{width:"120"}},[t._v("โรงรถซ้าย\n          "),a("br"),t._v(" "),a("div",{staticClass:"select"},[a("my-input",{attrs:{value:t.local.colorSelected.leftColor,inputObj:{type:"select",icon:"home",inputValue:t.HOUSECOLOR,name:"house_stair",placeholder:"เมนูสี",validate:""},validator:t.$validator},on:{input:function(e){t.local.colorSelected.leftColor=e},change:t.setLeftColor}})],1)]),t._v(" "),a("th",{attrs:{width:"120"}},[t._v("โรงรถขวา\n          "),a("br"),t._v(" "),a("div",{staticClass:"select"},[a("my-input",{attrs:{value:t.local.colorSelected.rightColor,inputObj:{type:"select",icon:"home",inputValue:t.HOUSECOLOR,name:"house_stair",placeholder:"เมนูสี",validate:""},validator:t.$validator},on:{input:function(e){t.local.colorSelected.rightColor=e},change:t.setRightColor}})],1)])])]),t._v(" "),a("tbody",t._l(t.inputsItem,function(e,l){return a("tr",{key:l},[a("td",[a("my-input",{attrs:{value:e.name,inputObj:{type:"text",name:"name_"+l,placeholder:"รายการ",validate:"required"},validator:t.$validator},on:{input:function(t){e.name=t}}})],1),t._v(" "),a("td",[a("my-input",{attrs:{value:e.amount,inputObj:{type:"text",name:"amount_"+l,placeholder:"หน่วย",validate:"required"},validator:t.$validator},on:{input:function(t){e.amount=t}}})],1),t._v(" "),a("td",[a("my-input",{attrs:{value:e.unit,inputObj:{type:"text",name:"unit_"+l,placeholder:"",validate:"required"},validator:t.$validator},on:{input:function(t){e.unit=t}}})],1),t._v(" "),a("td",[a("my-input",{attrs:{value:e.price,inputObj:{type:"text",name:"price_"+l,placeholder:"ราคา/หน่วย",validate:"required"},validator:t.$validator},on:{input:function(t){e.price=t}}})],1),t._v(" "),a("td",[a("my-input",{attrs:{value:e.l_default[t.local.colorSelected.leftColor],inputObj:{type:"text",name:"left_"+l,placeholder:"ซ้าย",validate:"required"},validator:t.$validator},on:{input:function(a){e.l_default[t.local.colorSelected.leftColor]=a}}})],1),t._v(" "),a("td",[a("my-input",{attrs:{value:e.r_default[t.local.colorSelected.rightColor],inputObj:{type:"text",name:"right_"+l,placeholder:"ขวา",validate:"required"},validator:t.$validator},on:{input:function(a){e.r_default[t.local.colorSelected.rightColor]=a}}})],1)])}))]),t._v(" "),a("div",{staticClass:"item-footer container-block"},[a("div",{staticClass:"container-block block right options"},[a("div",{staticClass:"delay container-block"},[a("label",{attrs:{for:""}},[t._v("กำหนดสั่ง")]),t._v(" "),a("div",{staticClass:"delay-input"},[a("my-input",{attrs:{value:t.local.materialDelayAll,inputObj:{type:"text",name:"order_delay",placeholder:"กำหนดสั่ง",validate:"required"},validator:t.$validator},on:{input:t.addMaterialDelay}})],1)]),t._v(" "),a("div",{staticClass:"material-group"},[this.local.items.length?a("my-tags-selection",{attrs:{objInputs:{label:"เลือกกลุ่มวัสดุ",placeholder:"เพิ่มกลุ่มวัสดุ"},resourceName:t.materialGroupResource,itemSelected:t.local.materialGroupAll},on:{selected:t.addMaterialToGroup}}):t._e()],1),t._v(" "),a("button",{staticClass:"button",on:{click:function(e){t.editRow("remove")}}},[a("i",{staticClass:"fa fa-minus",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("button",{staticClass:"button",on:{click:function(e){t.editRow("add")}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]),t._v(" "),this.local.items.length?a("div",{staticClass:"container-block block action"},[a("my-action",{attrs:{type:"update",obj:{title:"บันทึกข้อมูล"}},on:{clickEvent:function(e){t.submitForm("update")}}}),t._v(" "),a("my-action",{attrs:{type:"delete",obj:{title:"ลบข้อมูล"}},on:{clickEvent:function(e){t.submitForm("delete")}}})],1):t._e()])])},staticRenderFns:[]};var y=a("VU/8")(_,b,!1,function(t){a("GAhw")},"data-v-1ec8a542",null).exports,g={props:{},components:{breadcrumbBar:n.a,myAutoComplete:u.a,materialTemplateDefault:v,materialTemplateGarage:y},name:"AddMaterialPage",data:function(){return{local:{pageObj:{items:[{name:"ร้านค้า",route:"Store",key:"",active:!1,icon:"fa fa-th-large"},{name:"สร้างสินค้าใหม่",route:"AddMaterial",key:this.$route.params.key,active:!0,icon:""}],template:{class:"add-material-page"}},store:{},houseTemplate:{inputs:[],selected:null},materialTemplate:null}}},computed:{},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return o()(r.a.mark(function e(){var a,l,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.BUILDPARAM(),e.next=3,c.a.getResource({resourceName:s.a.api.store.index+"/"+t.$route.params.key,queryString:a});case 3:return l=e.sent,e.next=6,c.a.getResource({resourceName:s.a.api.house.dropdown,queryString:a});case 6:i=e.sent,t.local.store=l.data,t.local.houseTemplate.inputs=i.data;case 9:case"end":return e.stop()}},e,t)}))()},houseSelectedHandle:function(t){this.local.houseTemplate.selected=t,this.local.houseTemplate.selected?"098SW319I"===this.local.houseTemplate.selected.key?this.local.materialTemplate=v:this.local.materialTemplate=y:this.local.materialTemplate=null}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{class:["section",t.local.pageObj.template.class]},[a("breadcrumb-bar",{attrs:{dataObj:t.local.pageObj}}),t._v(" "),a("div",{staticClass:"container-block"},[a("div",{staticClass:"detail-panel"},[t.local.store.id?[a("div",{staticClass:"container-block  detail-block"},[a("div",{staticClass:"c-header container-block block"},[a("div",{staticClass:"block info container-block"},[a("div",{staticClass:"block store"},[a("div",[t._v("ร้านค้า: "),a("span",{staticClass:"value"},[t._v(t._s(t.local.store.name))])]),t._v(" "),a("div",[t._v("ประเภท: "),a("span",{staticClass:"value"},[t._v(t._s(t.local.store.type))])])]),t._v(" "),a("div",{staticClass:"block container-block house-template tags-select"},[a("my-auto-complete",{attrs:{arrInputs:t.local.houseTemplate.inputs,placeholder:"ชื่อแบบ หรือ แปลง",label:"ค้นหาแบบบ้าน"},on:{select:t.houseSelectedHandle}})],1)])]),t._v(" "),a("div",{staticClass:"c-body"},[a(t.local.materialTemplate,{tag:"component",attrs:{obj:{storeId:this.$route.params.key,houseTemplate:t.local.houseTemplate.selected},transition:"fade","transition-mode":"out-in"}})],1)])]:[a("template",{slot:"detail"})]],2)])],1)},staticRenderFns:[]};var k=a("VU/8")(g,C,!1,function(t){a("LdtD")},null,null);e.default=k.exports}});
//# sourceMappingURL=2.f108a0809d9f69e3f007.js.map