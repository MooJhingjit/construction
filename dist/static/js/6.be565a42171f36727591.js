webpackJsonp([6],{"2gbF":function(t,e){},"3N9c":function(t,e,a){"use strict";var r=a("3htv"),n={props:{headerObj:{type:Object,required:!0},dataObj:{type:Array,required:!0}},components:{},name:"worksheetTemplate",data:function(){return{local:{headerObj:{},dataObj:null}}},computed:{today:function(){return r.a.GET_DATETHAI("now")},technician:function(){return this.local.dataObj.length?this.local.dataObj[0].technician_name:""},approvedData:function(){return r.a.GET_DATETHAI(this.local.dataObj[0].updated_at)}},created:function(){this.local.dataObj=this.dataObj,this.summaryData()},methods:{getHtm:function(){return this.$refs.worksheet},printWorkSheet:function(){var t=this.getHtm(),e=window.open("","Title","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=1200,height=500,top=0,left=0"),a=document.createElement("style");a.type="text/css";var r="@media print {@page { size: landscape; margin: 0; }body { margin: 0.5cm 0.2cm; }}";a.styleSheet?a.styleSheet.cssText=r:a.appendChild(document.createTextNode(r)),e.document.getElementsByTagName("head")[0].appendChild(a),e.document.body.innerHTML=t.innerHTML,e.focus(),e.print()},summaryData:function(t){var e={price:0,reducePrice:0,totalPrice:0};return this.local.dataObj.map(function(t){e.price+=parseFloat(t.total_price)}),e.reducePrice=3*parseFloat(e.price)/100,e.totalPrice=parseFloat(e.price)-parseFloat(e.reducePrice),e[t]}},watch:{dataObj:{handler:function(t){this.local.dataObj=this.dataObj},deep:!0}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"worksheet",staticClass:"worksheet"},[t.local.dataObj.length>0?a("table",{staticStyle:{border:"none"},attrs:{width:"100%"}},[t._m(0),t._v(" "),a("tbody",{staticClass:"border"},[a("tr",[a("td",[a("table",{staticStyle:{border:"none"},attrs:{width:"100%"}},[a("tr",[a("td",{staticClass:"text-center",staticStyle:{"text-align":"center"},attrs:{width:"50%"}},[a("p",{staticStyle:{"font-size":"11px"}},[t._v("ผู้ส่งงาน: "+t._s(t.technician))])]),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"text-align":"center"},attrs:{width:"50%"}},[a("p",{staticStyle:{"font-size":"11px"}},[t._v("โครงการ: "+t._s(t.headerObj.project))]),t._v(" "),a("p",{staticStyle:{"font-size":"11px"}},[t._v("วันที่: "+t._s(t.today))])])])])])]),t._v(" "),a("tr",[a("td",[a("table",{staticClass:"main-table",staticStyle:{border:"none","font-size":"11px","border-collapse":"collapse"},attrs:{width:"100%"}},[t._m(1),t._v(" "),a("tbody",{staticStyle:{"font-size":"12px"}},[t._l(t.local.dataObj,function(e,r){return a("tr",{key:r},[a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v(t._s(r+1))]),t._v(" "),a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v(t._s(e.plan))]),t._v(" "),a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v(t._s(e.house_id))]),t._v(" "),a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v(t._s(e.work_group_name))]),t._v(" "),a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v("งวดที่ "+t._s(e.time))]),t._v(" "),a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"left"}},[t._v(t._s(e.name))]),t._v(" "),a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v(t._s(e.amount))]),t._v(" "),a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v(t._s(e.unit))]),t._v(" "),a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"right"}},[t._v(t._s(t.NUMBERWITHCOMMAS(e.price,2)))]),t._v(" "),a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"right"}},[t._v(t._s(t.NUMBERWITHCOMMAS(e.total_price,2)))]),t._v(" "),a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v(t._s(e.note))])])}),t._v(" "),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"text-align":"right","font-size":"11px",border:"1px solid #ccc",padding:"5px"},attrs:{colspan:"8"}},[t._v("รวมเงินที่อนุมัติจ่าย")]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"text-align":"right","font-weight":"bold","font-size":"11px",border:"1px solid #ccc",padding:"5px"},attrs:{colspan:"2"}},[t._v(t._s(t.NUMBERWITHCOMMAS(t.summaryData("price"),2)))]),t._v(" "),a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"text-align":"right","font-weight":"bold","font-size":"11px",border:"1px solid #ccc",padding:"5px"},attrs:{colspan:"8"}},[t._v("หัก 3%")]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"text-align":"right","font-weight":"bold","font-size":"11px",border:"1px solid #ccc",padding:"5px"},attrs:{colspan:"2"}},[t._v(t._s(t.NUMBERWITHCOMMAS(t.summaryData("reducePrice"),2)))]),t._v(" "),a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"center"}})]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"text-align":"right","font-weight":"bold","font-size":"11px",border:"1px solid #ccc",padding:"5px"},attrs:{colspan:"8"}},[t._v("รวมยอดเงินที่ได้รับทั้งหมด")]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{"text-align":"right","font-weight":"bold","font-size":"11px",border:"1px solid #ccc",padding:"5px"},attrs:{colspan:"2"}},[t._v(t._s(t.NUMBERWITHCOMMAS(t.summaryData("totalPrice"),2)))]),t._v(" "),a("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"center"}})])],2)])])])]),t._v(" "),a("tfoot",[a("tr",[a("td",[a("table",{staticClass:"main-table signature",staticStyle:{border:"none","font-size":"11px","border-collapse":"collapse","margin-top":"20px"},attrs:{width:"100%"}},[a("tr",[t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),a("td",{staticStyle:{border:"none !important",padding:"5px","text-align":"center"}},[a("p",[t._v("......................................................")]),t._v(" "),a("p",[t._v("ผู้อนุมัติจ่าย")]),t._v(" "),a("p",[t._v("วันที่ "+t._s(t.approvedData))])])])])])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticStyle:{"font-size":"13px"}},[e("tr",[e("td",{staticClass:"text-center",staticStyle:{position:"relative","font-weight":"bold","text-align":"center"}},[e("h2",[this._v("บริษัท โชคชนายุทธ จำกัด")]),this._v(" "),e("p",[this._v("75/152ซอยร่มเกล้า1 ถนนร่มเกล้า แขวงแสนแสบ เขตมีนบุรี กรุงเทพฯ 10510")]),this._v(" "),e("p",[this._v("โทร.(02)328-7948 แฟ็กซ์(02)919-5298")]),this._v(" "),e("p",{staticClass:"id",staticStyle:{position:"absolute",top:"0",right:"0","font-size":"10px"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticStyle:{"font-size":"13px"}},[a("tr",[a("td",{staticStyle:{position:"relative","font-weight":"500","font-size":"12px",border:"1px solid #ccc",padding:"5px","text-align":"center"},attrs:{rowspan:"2"}},[t._v("ลำดับ")]),t._v(" "),a("td",{staticStyle:{position:"relative","font-weight":"500","font-size":"12px",border:"1px solid #ccc",padding:"5px","text-align":"center"},attrs:{colspan:"5"}},[t._v("รายละเอียด")]),t._v(" "),a("td",{staticStyle:{position:"relative","font-weight":"500","font-size":"12px",border:"1px solid #ccc",padding:"5px","text-align":"center"},attrs:{colspan:"2"}},[t._v("จำนวน")]),t._v(" "),a("td",{staticStyle:{position:"relative","font-weight":"500","font-size":"12px",border:"1px solid #ccc",padding:"5px","text-align":"center"},attrs:{rowspan:"2"}},[t._v("ราคา/หน่วย")]),t._v(" "),a("td",{staticStyle:{position:"relative","font-weight":"500","font-size":"12px",border:"1px solid #ccc",padding:"5px","text-align":"center"},attrs:{rowspan:"2"}},[t._v("รวม")]),t._v(" "),a("td",{staticStyle:{position:"relative","font-weight":"500","font-size":"12px",border:"1px solid #ccc",padding:"5px","text-align":"center"},attrs:{width:"200",rowspan:"2"}},[t._v("หมายเหตุ")])]),t._v(" "),a("tr",[a("td",{staticStyle:{position:"relative","font-weight":"500","font-size":"12px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v("แปลงที่")]),t._v(" "),a("td",{staticStyle:{position:"relative","font-weight":"500","font-size":"12px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v("แบบบ้าน")]),t._v(" "),a("td",{staticStyle:{position:"relative","font-weight":"500","font-size":"12px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v("หมวดงาน")]),t._v(" "),a("td",{staticStyle:{position:"relative","font-weight":"500","font-size":"12px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v("งวดงาน")]),t._v(" "),a("td",{staticStyle:{position:"relative","font-weight":"500","font-size":"12px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v("รายการ")]),t._v(" "),a("td",{staticStyle:{position:"relative","font-weight":"500","font-size":"12px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v("ปริมาณ")]),t._v(" "),a("td",{staticStyle:{position:"relative","font-weight":"500","font-size":"12px",border:"1px solid #ccc",padding:"5px","text-align":"center"}},[t._v("หน่วย")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticClass:"text-center",staticStyle:{"text-align":"right","font-weight":"bold","font-size":"11px",border:"1px solid #ccc",padding:"5px"},attrs:{colspan:"8"}},[this._v("หักเงินเบิกสำรอง")]),this._v(" "),e("td",{staticClass:"text-right",staticStyle:{"text-align":"right","font-weight":"bold","font-size":"11px",border:"1px solid #ccc",padding:"5px"},attrs:{colspan:"2"}},[this._v("-")]),this._v(" "),e("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"center"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticClass:"text-center",staticStyle:{"text-align":"right","font-weight":"bold","font-size":"11px",border:"1px solid #ccc",padding:"5px"},attrs:{colspan:"8"}},[this._v("หักค่าใช่จ่ายอื่นๆ")]),this._v(" "),e("td",{staticClass:"text-right",staticStyle:{"text-align":"right","font-weight":"bold","font-size":"11px",border:"1px solid #ccc",padding:"5px"},attrs:{colspan:"2"}},[this._v("-")]),this._v(" "),e("td",{staticStyle:{"font-size":"11px",border:"1px solid #ccc",padding:"5px","text-align":"center"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{border:"none !important",padding:"5px","text-align":"center"}},[e("p",[this._v("......................................................")]),this._v(" "),e("p",[this._v("เจ้าหน้าที่ควบคุมงาน")]),this._v(" "),e("p",[this._v("วันที่...................................................")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{border:"none !important",padding:"5px","text-align":"center"}},[e("p",[this._v("......................................................")]),this._v(" "),e("p",[this._v("Project Site")]),this._v(" "),e("p",[this._v("วันที่...................................................")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{border:"none !important",padding:"5px","text-align":"center"}},[e("p",[this._v("......................................................")]),this._v(" "),e("p",[this._v("การเงิน บัญชี")]),this._v(" "),e("p",[this._v("วันที่...................................................")])])}]};var s=a("VU/8")(n,i,!1,function(t){a("5uch")},"data-v-58f8c89d",null);e.a=s.exports},"5uch":function(t,e){},ftOe:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("mvHQ"),n=a.n(r),i=a("Xxa5"),s=a.n(i),o=a("exGp"),c=a.n(o),l=a("ujS/"),u=a("ikD4"),p=a("kVPM"),d=a("Tdo9"),h=a("7x59"),v=a("7Dwl"),_=a("3N9c"),f={props:{},components:{breadcrumbBar:l.a,myAutoComplete:d.a,myAction:h.a,myInput:v.a,worksheetTemplate:_.a},name:"WorkSheetPage",data:function(){return{local:{pageObj:{items:[{name:"จ่ายค่างวด",route:"PayingPeriod",key:"",active:!0,icon:"fa fa-exchange"},{name:"ใบส่งงาน",route:"Worksheet",key:"",active:!0,icon:""}],template:{class:"work-sheet-page"}},technicians:{inputs:[],selected:null},project:{selected:null,value:null},plan:{inputs:[],selected:null,temp:[]},contract:{temp:[],selected:[]},inputsTemplate:{isExtra:!1,workGroup:{obj:{status:null},lists:[]}},yearSelection:{inputs:[],selected:null},monthSelection:{inputs:[],selected:null},extraTemplate:{},inputs:[],count:0,worksheetTemplate:[],headerTemplate:{},dateSelectionDefault:{year:this.EXTRACT_DATE("now","Y"),month:this.EXTRACT_DATE("now","M")}}}},computed:{houseId:function(){return this.local.contract.selected.house_id},itemLists:function(){var t=this,e=this.local.inputs;return null!==this.yearSelected&&(e=e.filter(function(e){return e.workGroup.obj.dateSelection.year===t.yearSelected||"new"===e.workGroup.obj.status})),null!==this.monthSelection&&(e=e.filter(function(e){return e.workGroup.obj.dateSelection.month===t.monthSelection||"new"===e.workGroup.obj.status})),e},yearSelected:function(){return this.local.yearSelection.selected},monthSelection:function(){return this.local.monthSelection.selected}},created:function(){var t=this;return c()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTechnician();case 2:return e.next=4,t.getAllPlans();case 4:case"end":return e.stop()}},e,t)}))()},methods:{getAllPlans:function(){var t=this;return c()(s.a.mark(function e(){var a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.BUILDPARAM({type:"project-search"}),e.next=3,u.a.getResource({resourceName:p.a.api.contract.dropdown,queryString:a});case 3:r=e.sent,t.local.contract.temp=r.data;case 5:case"end":return e.stop()}},e,t)}))()},getTechnician:function(){var t=this;return c()(s.a.mark(function e(){var a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,u.a.getResource({resourceName:p.a.api.technician.dropdown,queryString:a});case 3:r=e.sent,t.local.technicians.inputs=r.data;case 5:case"end":return e.stop()}},e,t)}))()},fetchData:function(){var t=this;return c()(s.a.mark(function e(){var a,r,n,i,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.local.inputs=[],a=t.local.technicians.selected.key,r=t.BUILDPARAM({project:t.local.project.selected,plan:t.local.plan.selected}),e.next=5,u.a.getResource({resourceName:p.a.api.workSheet.index+"/"+a,queryString:r});case 5:n=e.sent,i=[],o=[],n.data.length>0?n.data.map(function(e,a){t.local.inputs.push({workGroup:{realOrder:a,obj:{key:e.work_group_id,value:e.work_group_name,status:e.status,isExtra:e.is_extra,dateSelection:{year:t.EXTRACT_DATE(e.created_at,"Y"),month:t.EXTRACT_DATE(e.created_at,"M")}},lists:e.lists}});var r=t.EXTRACT_DATE(e.created_at,"Y"),n=t.EXTRACT_DATE(e.created_at,"M");i.push({key:r,value:r}),o.push({key:n,value:n}),t.local.yearSelection.inputs=t.REMOVEDUPLICATES(i,"key"),t.local.monthSelection.inputs=t.REMOVEDUPLICATES(o,"key")}):t.editRow("add");case 9:case"end":return e.stop()}},e,t)}))()},technicianSelectedHandle:function(t){this.local.project.selected=null,this.local.plan.selected=null,this.local.technicians.selected=t},projectSelectedHandle:function(t){null!==t?(this.local.project.selected=t.key,this.local.project.value=t.value,this.local.plan.selected=null,this.local.count=0,this.setPlanData()):this.local.plan.inputs=[]},workGroupSelectedHandle:function(t,e){var a=this;return c()(s.a.mark(function r(){var n;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a.local.inputs[e].workGroup.obj.key=t.key,a.local.inputs[e].workGroup.obj.value=t.value,!a.local.inputs[e].isExtra){r.next=5;break}return a.local.inputs[e].workGroup.lists.push({}),r.abrupt("return");case 5:return r.next=7,a.getWorkGroupDetails(t.key);case 7:(n=r.sent).length&&(a.local.inputs[e].workGroup.lists=n[0].details,a.local.inputs[e].workGroup.lists.map(function(t){t.status=1}));case 9:case"end":return r.stop()}},r,a)}))()},getWorkGroupDetails:function(t){var e=this;return c()(s.a.mark(function a(){var r,n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.BUILDPARAM({houseId:e.houseId,type:"with-detail"}),a.next=3,u.a.getResource({resourceName:p.a.api.workGroup.index+"/"+t,queryString:r});case 3:return n=a.sent,a.abrupt("return",n.data);case 5:case"end":return a.stop()}},a,e)}))()},setPlanData:function(){var t=this,e=this.local.contract.temp.filter(function(e){return e.project_id===t.local.project.selected}).map(function(t){return{key:t.plan,value:t.plan}});this.local.plan.inputs=this.REMOVEDUPLICATES(e,"key")},planSelectedHandle:function(t){this.local.count=0,this.local.plan.selected=t.key,this.local.plan.value=t.value,this.setContract(),this.fetchData(),this.setHeaderTemplate()},setContract:function(){var t=this,e=this.local.contract.temp.filter(function(e){return e.project_id===t.local.project.selected&&e.plan===t.local.plan.selected});this.local.contract.selected=e[0]},editRow:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("add"===t){this.local.count+=1;var a=JSON.parse(n()(this.local.inputsTemplate));e&&(a.isExtra=!0),a.workGroup.realOrder=this.local.inputs.length,a.workGroup.obj={dateSelection:this.local.dateSelectionDefault,status:"new"},this.local.inputs.push(a)}else this.local.count-=1,this.local.inputs.pop()},editExtraRow:function(t,e){"add"===t?this.local.inputs[e].workGroup.lists.push({}):this.local.inputs[e].workGroup.lists.pop()},submitForm:function(t){var e=this;return c()(s.a.mark(function a(){var r,n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$validator.validateAll();case 2:if(a.sent){a.next=5;break}return a.abrupt("return");case 5:return r={technician:e.local.technicians.selected,contract:e.local.contract.selected,workGroup:e.local.inputs[t].workGroup.obj,itemLists:e.local.inputs[t].workGroup.lists},e.local.inputs[t].isExtra&&(r.workGroup.isExtra=!0),n=p.a.api.workSheet.index,a.next=10,u.a.postResource({data:r,resourceName:n});case 10:if(200!==a.sent.status){a.next=16;break}return e.fetchData(),e.local.count=0,e.NOTIFY("success"),a.abrupt("return");case 16:e.NOTIFY("error");case 17:case"end":return a.stop()}},a,e)}))()},getListStatus:function(t,e,a){return!0===e.status&&(e.status=1),this.GETWORKSHEETSTATUS(e.status)[0][a]},setDataAfterUpdateing:function(t){this.local.inputs[t].workGroup.obj.status="IP",this.local.count=0},isSaved:function(t){return"IP"===this.local.inputs[t].workGroup.obj.status},setItemStatus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"arr",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"searchInArr"===e||(this.local.inputs[t].workGroup.lists[a].status=r)},currentGroup:function(t){return this.local.inputs[t].workGroup.lists},setListsSelected:function(t,e,a){var r=this;return c()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r.isSaved(e)?r.$dialog.confirm({message:"ยืนยันการทำรายการ",cancelText:"ยกเลิก",confirmText:"ยืนยัน",type:"is-success",onConfirm:function(){var t=c()(s.a.mark(function t(){var n,i,o,c,l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.local.inputs[e].workGroup.lists[a].id,i=r.local.inputs[e].workGroup.lists[a].amount,o=r.local.inputs[e].workGroup.lists[a].price,c=r.local.technicians.selected.key,l=p.a.api.workSheetDetail.index+"/"+n,t.next=7,u.a.putResource({data:{price:o,amount:i,technician:c,status:"1"},resourceName:l});case 7:if(1===t.sent.data){t.next=10;break}return t.abrupt("return");case 10:r.NOTIFY("success");case 11:case"end":return t.stop()}},t,r)}));return function(){return t.apply(this,arguments)}}(),onCancel:function(){r.local.inputs[e].workGroup.lists[a].status=0}}):(r.local.inputs[e].workGroup.lists[a].status=t?"1":"0",r.local.inputs[e].workGroup.lists[a].technicianName=r.local.technicians.selected.value);case 1:case"end":return n.stop()}},n,r)}))()},getClassGroup:function(t){return[{"extra-row":this.local.inputs[t].workGroup.obj.isExtra}]},setHeaderTemplate:function(){this.local.headerTemplate={project:this.local.project.value,plan:this.local.plan.value,house:this.houseId,workGroup:"xxxx",technicians:this.local.technicians.selected.value}},printWorkSheet:function(t){this.local.worksheetTemplate=this.currentGroup(t),this.$refs.worksheetTemplate.printWorkSheet()},filterYear:function(t){this.local.yearSelection.selected=t.key},filterMonth:function(t){this.local.monthSelection.selected=t.key},resetFilter:function(){this.yearSelection={inputs:[],selected:null},this.monthSelection={inputs:[],selected:null}},updateStatus:function(t,e,a){var r=this;return c()(s.a.mark(function n(){var i,o;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.status=e.target.checked?"3":"1",i={item:t,updateType:"update-status"},o=p.a.api.workSheet.index+"/"+t.id,n.next=5,u.a.putResource({data:i,resourceName:o});case 5:r.local.inputs[a].workGroup.lists.map(function(e){e.id===t.id&&(e.status=parseInt(t.status))}),r.NOTIFY("success");case 7:case"end":return n.stop()}},n,r)}))()},getStatus:function(t){return[3,5].includes(t.status)}},watch:{yearSelected:function(){this.local.monthSelection.selected=null}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{class:["section",t.local.pageObj.template.class]},[a("breadcrumb-bar",{attrs:{dataObj:t.local.pageObj}}),t._v(" "),a("div",{staticClass:"container-block"},[a("div",{staticClass:"detail-panel"},[a("div",{staticClass:"container-block  detail-block"},[a("div",{staticClass:"block c-header"},[a("div",{staticClass:"container-block"},[a("div",{staticClass:"block"},[a("my-auto-complete",{attrs:{arrInputs:t.local.technicians.inputs,config:{getNullVal:!1},placeholder:"ค้นหาช่าง",label:""},on:{select:t.technicianSelectedHandle}})],1),t._v(" "),a("div",{staticClass:"block"},[null!==t.local.technicians.selected?a("my-auto-complete",{attrs:{arrInputs:"project",config:{getNullVal:!1},placeholder:"ค้นหาโครงการ",label:""},on:{select:t.projectSelectedHandle}}):t._e()],1),t._v(" "),a("div",{staticClass:"block"},[null!==t.local.technicians.selected&&null!==t.local.project.selected?a("my-auto-complete",{attrs:{arrInputs:t.local.plan.inputs,config:{getNullVal:!1},placeholder:"ค้นหาแปลง",label:""},on:{select:t.planSelectedHandle}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"container-block filter-menu"},[a("div",{staticClass:"block"},[null!==t.local.plan.selected?a("my-auto-complete",{attrs:{arrInputs:t.local.yearSelection.inputs,config:{getNullVal:!0},placeholder:"ระบุปี",label:""},on:{select:t.filterYear}}):t._e()],1),t._v(" "),a("div",{staticClass:"block"},[null!==t.local.yearSelection.selected&&null!==t.local.plan.selected?a("my-auto-complete",{attrs:{arrInputs:t.local.monthSelection.inputs,config:{getNullVal:!0},placeholder:"ระบุเดือน",label:""},on:{select:t.filterMonth}}):t._e()],1),t._v(" "),a("div",{staticClass:"block"}),t._v(" "),a("div",{staticClass:"block"}),t._v(" "),a("div",{staticClass:"block"})])]),t._v(" "),null!==t.local.project.selected&&null!==t.local.plan.selected?a("div",{staticClass:"block c-body"},[a("div",{staticClass:"container-block result"},[a("div",{staticClass:"block"},[t._v("แบบบ้าน "+t._s(t.houseId))]),t._v(" "),a("div",{staticClass:"block"}),t._v(" "),a("div",{staticClass:"block"})]),t._v(" "),a("table",{staticClass:"table rows-table is-hoverable"},[t._m(0),t._v(" "),a("tbody",t._l(t.itemLists,function(e,r){return a("tr",{key:e.workGroup.realOrder,class:t.getClassGroup(e.workGroup.realOrder)},[a("td",[a("p",[t._v(" "+t._s(r+1))])]),t._v(" "),a("td",[t.isSaved(e.workGroup.realOrder)?a("p",[t._v(t._s(e.workGroup.obj.value))]):a("my-auto-complete",{attrs:{arrInputs:"workGroup",placeholder:"เลือกหมวดงาน",config:{getNullVal:!1},label:""},on:{select:function(a){return t.workGroupSelectedHandle(a,e.workGroup.realOrder)}}}),t._v(" "),e.isExtra?a("div",{staticClass:"list-btn"},[e.workGroup.lists.length>0?a("button",{staticClass:"button",on:{click:function(a){t.editExtraRow("add",e.workGroup.realOrder)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),e.workGroup.lists.length>1?a("button",{staticClass:"button",on:{click:function(a){t.editExtraRow("minus",e.workGroup.realOrder)}}},[a("i",{staticClass:"fa fa-minus",attrs:{"aria-hidden":"true"}})]):t._e()]):t._e()],1),t._v(" "),a("td",{staticClass:"list-name"},[e.isExtra?t._l(t.currentGroup(e.workGroup.realOrder),function(e,r){return a("my-input",{key:r,attrs:{value:e.name,validator:t.$validator,inputObj:{type:"text",name:"name"+r,placeholder:"",validate:"required"}},on:{input:function(t){e.name=t}}})}):t._l(t.currentGroup(e.workGroup.realOrder),function(r,n){return a("p",{key:n},[parseInt(r.status)&&t.isSaved(e.workGroup.realOrder)?[t._v(t._s(r.name))]:a("label",{staticClass:"checkbox"},[t.isSaved(e.workGroup.realOrder)?a("input",{directives:[{name:"model",rawName:"v-model",value:r.status,expression:"item.status"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(r.status)?t._i(r.status,null)>-1:r.status},on:{change:[function(e){var a=r.status,n=e.target,i=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&t.$set(r,"status",a.concat([null])):s>-1&&t.$set(r,"status",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(r,"status",i)},function(a){t.setListsSelected(r.status,e.workGroup.realOrder,n)}]}}):a("input",{directives:[{name:"model",rawName:"v-model",value:r.id,expression:"item.id"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(r.id)?t._i(r.id,null)>-1:r.id},on:{change:[function(e){var a=r.id,n=e.target,i=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&t.$set(r,"id",a.concat([null])):s>-1&&t.$set(r,"id",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(r,"id",i)},function(a){t.setListsSelected(r.id,e.workGroup.realOrder,n)}]}}),t._v("\n                          "+t._s(r.name)+"\n                        ")])],2)})],2),t._v(" "),a("td",t._l(t.currentGroup(e.workGroup.realOrder),function(r,n){return a("p",{key:n},[parseInt(r.status)&&t.isSaved(e.workGroup.realOrder)?[t._v(t._s(r.technicianName||t.local.technicians.selected.value))]:t._e()],2)})),t._v(" "),a("td",t._l(t.currentGroup(e.workGroup.realOrder),function(r,n){return parseInt(r.status)&&t.isSaved(e.workGroup.realOrder)?a("p",{key:n},[[t._v(t._s(r.amount))]],2):a("my-input",{attrs:{value:r.amount,validator:t.$validator,inputObj:{type:"text",name:"amount"+n,placeholder:"",validate:"required"}},on:{input:function(t){r.amount=t}}})})),t._v(" "),a("td",[e.isExtra?t._l(t.currentGroup(e.workGroup.realOrder),function(e,r){return a("my-input",{key:r,attrs:{value:e.unit,validator:t.$validator,inputObj:{type:"text",name:"unit"+r,placeholder:"",validate:"required"}},on:{input:function(t){e.unit=t}}})}):t._l(t.currentGroup(e.workGroup.realOrder),function(e,r){return a("p",{key:r},[t._v(t._s(e.unit))])})],2),t._v(" "),a("td",[e.isExtra?t._l(t.currentGroup(e.workGroup.realOrder),function(e,r){return a("my-input",{key:r,attrs:{value:e.price,validator:t.$validator,inputObj:{type:"text",name:"price"+r,placeholder:"",validate:"required"}},on:{input:function(t){e.price=t}}})}):t._l(t.currentGroup(e.workGroup.realOrder),function(e,r){return a("p",{key:r},[t._v(t._s(t.NUMBERWITHCOMMAS(e.price,2)))])})],2),t._v(" "),a("td",t._l(t.currentGroup(e.workGroup.realOrder),function(r,n){return parseInt(r.status)&&t.isSaved(e.workGroup.realOrder)?a("p",{key:n},[[t._v(t._s(r.note))]],2):a("my-input",{attrs:{value:r.note,validator:t.$validator,inputObj:{type:"text",name:"note"+n,placeholder:"",validate:""}},on:{input:function(t){r.note=t}}})})),t._v(" "),a("td",t._l(t.currentGroup(e.workGroup.realOrder),function(e,r){return a("p",{key:r},[t._v(t._s(t.SET_DATEFORMAT(e.updated_at)))])})),t._v(" "),a("td",[t.currentGroup(e.workGroup.realOrder).length&&!t.isSaved(e.workGroup.realOrder)?a("my-action",{attrs:{type:"",obj:{title:"บันทึก",color:"is-light",isConfirm:!0}},on:{clickEvent:function(a){t.submitForm(e.workGroup.realOrder)}}}):t.isSaved(e.workGroup.realOrder)?t._l(t.currentGroup(e.workGroup.realOrder),function(r,n){return a("p",{key:n,class:"tag "+t.getListStatus(e.workGroup.realOrder,r,"class")},[t._v("\n                      "+t._s(t.getListStatus(e.workGroup.realOrder,r,"name"))+"\n                    ")])}):t._e()],2),t._v(" "),a("td",t._l(t.currentGroup(e.workGroup.realOrder),function(r,n){return a("p",{key:n},[a("label",{staticClass:"checkbox"},[a("input",{attrs:{type:"checkbox",disabled:![1,3].includes(r.status)||!t.isSaved(e.workGroup.realOrder)},domProps:{checked:t.getStatus(r)},on:{change:function(a){t.updateStatus(r,a,e.workGroup.realOrder)}}})])])}))])}))])]):t._e(),t._v(" "),null!==t.local.project.selected&&null!==t.local.plan.selected?a("div",{staticClass:"container-block block right"},[1==t.local.count?a("button",{staticClass:"button",on:{click:function(e){t.editRow("minus")}}},[a("i",{staticClass:"fa fa-minus",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),0==t.local.count?a("button",{staticClass:"button",on:{click:function(e){t.editRow("add",!0)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" "),a("span",[t._v("(พิเศษ)")])]):t._e(),t._v(" "),0==t.local.count?a("button",{staticClass:"button",on:{click:function(e){t.editRow("add")}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})]):t._e()]):t._e()])])]),t._v(" "),a("worksheet-template",{ref:"worksheetTemplate",staticClass:"worksheet-template",attrs:{headerObj:t.local.headerTemplate,dataObj:t.local.worksheetTemplate}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"5"}},[t._v("#")]),t._v(" "),a("th",{attrs:{width:"100"}},[t._v("หมวด")]),t._v(" "),a("th",{attrs:{width:"120"}},[t._v("งวด/รายการ")]),t._v(" "),a("th",{attrs:{width:"100"}},[t._v("ช่าง")]),t._v(" "),a("th",{attrs:{width:"50"}},[t._v("จำนวน")]),t._v(" "),a("th",{attrs:{width:"50"}},[t._v("หน่วย")]),t._v(" "),a("th",{attrs:{width:"80"}},[t._v("ราคา/หน่วย")]),t._v(" "),a("th",{attrs:{width:"150"}},[t._v("หมายเหตุ")]),t._v(" "),a("th",{attrs:{width:"50"}},[t._v("อัพเดทล่าสุด")]),t._v(" "),a("th",{attrs:{width:"50"}},[t._v("สถานะ")]),t._v(" "),a("th",{attrs:{width:"30"}},[t._v("ตรวจสอบแล้ว")])])])}]};var g=a("VU/8")(f,x,!1,function(t){a("2gbF")},"data-v-bf38aeb8",null);e.default=g.exports}});
//# sourceMappingURL=6.be565a42171f36727591.js.map