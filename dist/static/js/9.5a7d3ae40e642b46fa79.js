webpackJsonp([9],{H7WX:function(t,a){},MUxo:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("Xxa5"),s=e.n(l),c=e("exGp"),n=e.n(c),o=e("ujS/"),r=e("O/8C"),i=e("KxLu"),d=e("UlOv"),u={extends:d.b,props:{data:{type:Object,required:!0}},mounted:function(){this.renderChart(this.data,{responsive:!0,maintainAspectRatio:!1,legend:{display:!1}})}},v=e("VU/8")(u,null,!1,null,null,null).exports,_={extends:d.a,props:{data:{type:Object,required:!0}},mounted:function(){this.renderChartJs()},methods:{renderChartJs:function(){this.renderChart(this.data,{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}]}})}},watch:{data:function(){console.log("dfdf"),this.renderChartJs()}}},p=e("VU/8")(_,null,!1,null,null,null).exports,C=e("kVPM"),b=e("Y3eR"),h=e("ikD4"),m={props:{},components:{breadcrumbBar:o.a,optionDetailTemplate:r.a,noResultTemplate:i.a,doughnutChart:v,barChart:p,dataTable:b.a},name:"UserPage",data:function(){return{local:{pageObj:{items:[{name:"ข้อมูลสูญเสีย",route:"Losing",key:"",active:!0,icon:"fa fa-address-book-o"},{name:"รายละเอียด",route:"LosingDetail",key:"",active:!0,icon:""}],template:{class:"losing-detail-page"}},statusSearch:[],idSelected:null,projectName:null,contractAll:null,detailObj:{contractSelected:null,losingTotal:null,ordering:null,chart:{materialItem:null,donuth:null}},allProjectItem:{labels:["มัณฑนา บางนา กม.7","นันทวัน บางนา กม.7","มัณฑนา อ่อนนุช - วงแหวน 5","มัณฑนา ศรีนครินทร์ ร่มเกล้า","นันทวัน รามอินทรา พหลโยธิน 50"],datasets:[{backgroundColor:"#CACACA",data:[63915,17224,14392,8527,2070]}]},materialItem:{labels:["กุญแจเขาควาย K-7/B0312/SN ห้องน้ำ (เปิดซ้าย )","หินแกรนิตดำซานซีขนาด 60 X 91 cm.","หินแกรนิตดำซานซี ขนาด 20x 180 cm","กระเบื้องพื้น GRAND VIVA 60x60 cm"],datasets:[{backgroundColor:"#40A5EF",data:[620.8,1595,1044,716]}]},allContractItem:{labels:["00C06 (199CA238C)","00C07 (199CA238C)","00D03 (199CA238C)","00D04 (244CA248C)","00D05 (244CA248C)","00F02 (199CA238C)","00B01 (244CA248C)","00H01 (244CA248C)","00H02 (199CA238C)"],datasets:[{backgroundColor:"#f87979",data:[23535,24567,5786,7899,89889,3342,3546,45767,6877]}]}}}},created:function(){},computed:{resourceName:function(){return C.a.api.losing.index},losingPercent:function(){if(null===this.local.detailObj.losingTotal)return 0;var t=100*this.local.detailObj.losingTotal/this.local.detailObj.contractSelected.paid;return this.NUMBERWITHCOMMAS(t,2)+" %"}},methods:{selectedDataHandle:function(t){console.log(t),this.local.projectName=t.name,this.local.idSelected=t.projectId,this.getFullData()},getFullData:function(){var t=this;return n()(s.a.mark(function a(){var e,l,c;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=C.a.api.losing.index+"/"+t.local.idSelected,l=[],a.next=4,h.a.getResource({resourceName:e,queryString:l});case 4:c=a.sent,t.local.contractAll=c.data;case 6:case"end":return a.stop()}},a,t)}))()},getLosingData:function(t){var a=this;return n()(s.a.mark(function e(){var l,c,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.cleanData(),l=C.a.api.losing.fullObj+"/"+t.code,c=[],e.next=5,h.a.getResource({resourceName:l,queryString:c});case 5:n=e.sent,a.local.detailObj.contractSelected=t,a.local.detailObj.losingTotal=n.data.losingTotal,a.local.detailObj.ordering=n.data.ordering,a.local.detailObj.chart=n.data.chart;case 10:case"end":return e.stop()}},e,a)}))()},cleanData:function(){this.local.detailObj.contractSelected=null,this.local.detailObj.losingTotal=null,this.local.detailObj.ordering=null,this.local.detailObj.chart=null}}},g={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("option-detail-template",{ref:"template",attrs:{templateObj:t.local.pageObj.template,isSelected:t.local.idSelected}},[e("template",{slot:"title"},[e("breadcrumb-bar",{attrs:{dataObj:t.local.pageObj}})],1),t._v(" "),e("template",{slot:"data-table"},[e("data-table",{ref:"dataTable",attrs:{resourceName:t.resourceName,statusSearch:t.local.statusSearch},on:{selectedData:t.selectedDataHandle}})],1),t._v(" "),e("template",{slot:"function"}),t._v(" "),e("template",{slot:"detail"},[e("div",{staticClass:"container-block  detail-block"},[e("div",{staticClass:"block c-header"},[e("table",{staticClass:"transparent-table"},[e("tr",[e("td",[t._v("โครงการ:"),e("span",{staticClass:"value is-linkpage",on:{click:function(a){t.GOTOPAGE("Project",t.local.projectName)}}},[t._v(t._s(t.local.projectName))])])]),t._v(" "),e("tr",[e("td",{attrs:{colspan:"2"}},[e("div",{staticClass:"tags tags-select"},t._l(t.local.contractAll,function(a,l){return e("span",{key:l,staticClass:"tag",on:{click:function(e){t.getLosingData(a)}}},[t._v(t._s(a.code+" ("+a.house_id+")"))])}))])])])]),t._v(" "),null!=t.local.detailObj.contractSelected?e("div",{staticClass:"block c-body"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-name"},[t._v(t._s(t.local.detailObj.contractSelected.code+" ("+t.local.detailObj.contractSelected.house_id+")"))]),t._v(" "),e("div",{staticClass:"card-content"},[e("div",{staticClass:"detail"},[e("table",{staticClass:"transparent-table"},[e("tr",[e("td",[t._v("ทำสัญญา: "),e("span",{staticClass:"value"},[t._v(t._s(t.SET_DATEFORMAT(t.local.detailObj.contractSelected.created_at)))])]),t._v(" "),e("td",[t._v("วันที่ผ่านEP: "),e("span",{staticClass:"value"})])]),t._v(" "),e("tr",[e("td",[t._v("ยอดรับงาน: "),e("span",{staticClass:"value"},[t._v(t._s(t.NUMBERWITHCOMMAS(t.local.detailObj.contractSelected.paid,2)))])]),t._v(" "),e("td",[t._v("ยอดสูญเสีย: "),e("span",{staticClass:"value"},[t._v(t._s(t.NUMBERWITHCOMMAS(t.local.detailObj.losingTotal))+" ("+t._s(t.losingPercent)+")")])])])])])])]),t._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-name"},[t._v("รายการวัสดุ")]),t._v(" "),e("div",{staticClass:"card-content"},[e("table",{staticClass:"table is-bordered rows-table"},[e("thead",[e("tr",[e("th",[t._v("รายการ")]),t._v(" "),e("th",[t._v("จำนวน")]),t._v(" "),e("th",[t._v("หน่วย")]),t._v(" "),e("th",[t._v("ราคา")]),t._v(" "),e("th",[t._v("ราคารวม + ค่าแรง")]),t._v(" "),e("th",[t._v("หมายเหตุ")]),t._v(" "),e("th",[t._v("วันที่")])])]),t._v(" "),e("tbody",t._l(t.local.detailObj.ordering,function(a,l){return e("tr",{key:l},[e("td",[t._v(t._s(a.name))]),t._v(" "),e("td",[t._v(t._s(a.amount))]),t._v(" "),e("td",[t._v(t._s(a.unit_text))]),t._v(" "),e("td",[t._v(t._s(t.NUMBERWITHCOMMAS(a.price,2)))]),t._v(" "),e("td",[t._v(t._s(t.NUMBERWITHCOMMAS(a.price,2)))]),t._v(" "),e("td",[t._v(t._s(a.note))]),t._v(" "),e("td",[t._v(t._s(t.SET_DATEFORMAT(a.created_at)))])])}))]),t._v(" "),e("div",{staticClass:"chart"},[e("bar-chart",{attrs:{data:t.local.detailObj.chart.materialItem,width:150,height:150}}),t._v(" "),e("div",{staticClass:"chart-name"},[t._v("\n                  ยอดสูญเสีย: "+t._s(t.NUMBERWITHCOMMAS(t.local.detailObj.losingTotal))+" ("+t._s(t.losingPercent)+")\n                ")])],1)])]),t._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-content"},[e("div",{staticClass:"chart two-column container-block"},[e("div",{staticClass:"block"},[e("doughnut-chart",{attrs:{data:t.local.allContractItem,width:250,height:250}}),t._v(" "),e("div",{staticClass:"chart-name"},[t._v("\n                    สรุปข้อมูลสูญเสียโครงการ รามอินทรา พหลโยธิน 50\n                  ")])],1)])])])]):t._e()])])],2)},staticRenderFns:[]};var O=e("VU/8")(m,g,!1,function(t){e("H7WX")},null,null);a.default=O.exports}});
//# sourceMappingURL=9.5a7d3ae40e642b46fa79.js.map