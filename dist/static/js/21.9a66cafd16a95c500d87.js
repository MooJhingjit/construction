webpackJsonp([21],{"62YR":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Xxa5"),n=e.n(s),o=e("exGp"),c=e.n(o),i=e("NHnr"),l=e("ujS/"),r=e("O/8C"),d=e("ikD4"),_=e("kVPM"),u=e("uvJ5"),v={props:{},components:{myAction:e("7x59").a,ModelPanel:u.a,breadcrumbBar:l.a,optionDetailTemplate:r.a},name:"FrontSiteUpdatePage",data:function(){return{local:{pageObj:{items:[{name:"ไชต์งานหลัก",route:"FrontSite",key:"",active:!1,icon:"fa fa-home"},{name:"อัพเดทสถานะ",route:"FrontSiteUpdate",key:this.$route.params.key,active:!0,icon:""}]},project:null,contract:null,progress:null,modelData:null}}},computed:{},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return c()(n.a.mark(function a(){var e,s,o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=_.a.api.frontSite.index+"/"+t.$route.params.key,s=[],a.next=4,d.a.getResource({resourceName:e,queryString:s});case 4:o=a.sent,t.local.project=o.data.project,t.local.contract=o.data.contract,t.local.time=o.data.time;case 8:case"end":return a.stop()}},a,t)}))()},showTaskDetail:function(t){this.$refs.modelPanel.isActive=!0,this.local.modelData=t},updateTask:function(t){var a=this;return c()(n.a.mark(function e(){var s,o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=_.a.api.frontSite.index+"/"+a.$route.params.key,(o=t).houseId=a.local.contract.house_id,e.next=5,d.a.putResource({data:o,resourceName:s});case 5:200===e.sent.status&&(i.bus.$emit("emitSocket",{key:"UPDATE_ORDERING",data:{}}),a.NOTIFY("success"),a.fetchData());case 7:case"end":return e.stop()}},e,a)}))()}}},m={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"section front-site-update-page"},[e("breadcrumb-bar",{attrs:{dataObj:t.local.pageObj}}),t._v(" "),null!=t.local.project?e("div",{staticClass:"container-block"},[e("article",{staticClass:"tile is-child notification"},[e("div",{staticClass:"project-name"},[t._v(t._s(t.local.project.name)+" ("+t._s(t.local.contract.code)+")")]),t._v(" "),e("div",{staticClass:"todo-lists"},[e("table",{staticClass:"table is-bordered"},[t._m(0),t._v(" "),e("tbody",t._l(t.local.time,function(a,s){return e("tr",{key:s,class:{success:a.is_success}},[e("td",[t._v(t._s(a.time)+" "),a.is_success?e("span",[t._v("(เสร็จสิ้น)")]):t._e()]),t._v(" "),e("td",{staticClass:"list"},t._l(a.progress,function(a,s){return e("div",{key:s},[e("div",{staticClass:"task"},[t._v(t._s(a.order)+". "+t._s(a.name)+" "),e("span",{staticClass:"detail",on:{click:function(e){t.showTaskDetail(a)}}},[t._v("[รายละเอียด]")])])])})),t._v(" "),e("td",{staticClass:"status",attrs:{width:"70"}},t._l(a.progress,function(a,s){return e("div",{key:s},["done"===a.status?[e("i",{staticClass:"fa fa-check-square-o",attrs:{"aria-hidden":"true"}})]:[e("my-action",{attrs:{type:"null",obj:{title:"อัพเดท",color:"button is-outlined",isConfirm:!0}},on:{clickEvent:function(e){t.updateTask(a)}}})]],2)}))])}))])])])]):t._e(),t._v(" "),e("model-panel",{ref:"modelPanel"},[null!=t.local.modelData?e("div",{staticClass:"model"},[e("div",[t._v("เลขที่สัญญา: "),e("span",[t._v(t._s(t.local.modelData.contract_code))])]),t._v(" "),e("div",[t._v("งวด: "),e("span",[t._v(t._s(t.local.modelData.time))])]),t._v(" "),e("div",[t._v("งาน: "),e("span"),t._v(" "+t._s(t.local.modelData.order_all)+" "),e("span",[t._v(t._s(t.local.modelData.name))])]),t._v(" "),e("div",[t._v("กำหนดเริ่ม (ตามสัญญา): "),e("span",[t._v(t._s(t.SET_DATEFORMAT(t.local.modelData.start_date)))])]),t._v(" "),e("div",[t._v("กำหนดเสร็จ (ตามสัญญา): "),e("span",[t._v(t._s(t.SET_DATEFORMAT(t.local.modelData.end_date)))])]),t._v(" "),e("div",[t._v("เสร็จจริง: "),e("span",[t._v(t._s(t.SET_DATEFORMAT(t.local.modelData.real_date)))])]),t._v(" "),e("div",[t._v("ล่าช้า: "),e("span",[t._v(t._s(t.local.modelData.delay)+" (วัน)")])]),t._v(" "),e("div",[t._v("สถานะ: "),e("span",[t._v(t._s(t.GET_STATUSNAME(t.local.modelData.status)))])])]):t._e()])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("th",[this._v("งวด")]),this._v(" "),a("th",[this._v("งาน")]),this._v(" "),a("th",[this._v("เสร็จสิ้น")])])}]};var p=e("VU/8")(v,m,!1,function(t){e("m2QM")},"data-v-38939206",null);a.default=p.exports},m2QM:function(t,a){}});
//# sourceMappingURL=21.9a66cafd16a95c500d87.js.map