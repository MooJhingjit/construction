{"version":3,"sources":["webpack:///src/Pages/Ordering/group.vue","webpack:///./src/Pages/Ordering/group.vue?b1e0","webpack:///./src/Pages/Ordering/group.vue"],"names":["group","breadcrumbBar","Breadcrumb","optionDetailTemplate","option_detail","noResultTemplate","no_result","dataTable","DataTable","myInput","my_input","myAction","my_action","myAutoComplete","my_autocomp","name","route","key","active","icon","index","fetchData","_this","this","BUILDPARAM","queryString","data","objVal","lists","id","material_id","amount","house_id","_this2","validateAll","resourceName","type","_context2","t0","cleanInput","isValid","inputs","idSelected","reloadTable","Ordering_group","render","_vm","_h","$createElement","_c","_self","ref","attrs","isSelected","local","templateObj","pageObj","template","on","cancleForm","$event","submitForm","slot","dataObj","_v","tableType","statusSearch","selectedData","selectedDataHandle","staticClass","click","value","inputObj","placeholder","validate","validator","$validator","input","width","arrInputs","houseTemplate","label","select","houseSelectedHandle","_l","item","_s","houseId","materialName","directives","rawName","expression","size","domProps","target","composing","$set","_e","obj","title","clickEvent","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/18.bf67a366b276b5bf651a.js","sourcesContent":["<template>\n  <option-detail-template ref=\"template\" :isSelected=\"local.idSelected\" :templateObj=\"local.pageObj.template\" @cancleForm=\"submitForm('cancel')\">\n    <template slot=\"title\"><breadcrumb-bar :dataObj=\"local.pageObj\"></breadcrumb-bar></template>\n    <template slot=\"data-table\">\n      <data-table ref=\"dataTable\"\n      tableType=\"normal\"\n      :resourceName=\"resourceName\"\n      :statusSearch=\"local.statusSearch\"\n      @selectedData=\"selectedDataHandle\"\n      ></data-table>\n    </template>\n    <template slot=\"function\">\n      <button class=\"button is-link\" @click=\"submitForm('add')\">เพิ่มข้อมูลใหม่</button>\n    </template>\n    <template v-if=\"local.idSelected\">\n      <template slot=\"detail\">\n        <div class=\"container-block detail-block\">\n          <div class=\"block result\">\n            <div class=\"title-name\">\n              <div class=\"label\">กลุ่มวัสดุ</div>\n              <my-input\n                :value=\"local.inputs.name\"\n                :inputObj=\"{type: 'text', name: 'order_group', placeholder: 'ชื่อกลุ่มวัสดุ', validate: 'required'}\"\n                :validator=\"$validator\"\n                @input=\"value => { local.inputs.name = value }\"\n                ></my-input>\n            </div>\n            <div class=\"items\" >\n              <table class=\"transparent-table\">\n                <thead>\n                  <tr>\n                    <td width=\"200\">\n                      <my-auto-complete\n                      @select=\"houseSelectedHandle\"\n                      :arrInputs=\"local.houseTemplate.inputs\"\n                      placeholder=\"ค้นหาแบบบ้าน\"\n                      label=\"\"\n                      ></my-auto-complete>\n                    </td>\n                    <td>รายการ</td>\n                    <td width=\"40\">จำนวน</td>\n                    <td></td>\n                  </tr>\n                </thead>\n                <tbody v-if=\"local.inputs.lists.length\">\n                  <tr :key=\"index\" v-for=\"(item, index) in local.inputs.lists\">\n                    <td>{{item.houseId}}</td>\n                    <td>{{item.materialName}}</td>\n                    <td><input type=\"number\" size=\"2\" v-model=\"item.amount\" class=\"input\"></td>\n                    <!-- <td><i class=\"fa fa-times\" aria-hidden=\"true\" @click=\"deleteListsItem(index)\"></i></td> -->\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n        <div class=\"container-block footer-panel\">\n          <my-action\n            type=\"update\"\n            :obj=\"{title: 'บันทึกข้อมูล'}\"\n             @clickEvent=\"submitForm('update')\"\n          >\n          </my-action>\n          <my-action\n            type=\"delete\"\n            :obj=\"{title: 'ลบข้อมูล'}\"\n             @clickEvent=\"submitForm('delete')\"\n          >\n          </my-action>\n          <!-- <button class=\"button\" @click=\"submitForm('update')\">บันทึกข้อมูล</button>\n          <button class=\"button is-danger\" @click=\"submitForm('delete')\">ลบข้อมูล</button> -->\n          <!-- {{this.local.inputs}} -->\n        </div>\n      </template>\n    </template>\n    <template v-else slot=\"detail\">\n      <no-result-template></no-result-template>\n    </template>\n  </option-detail-template>\n</template>\n\n<script>\nimport breadcrumbBar from '@Components/Breadcrumb'\nimport optionDetailTemplate from '@Components/Template/option-detail'\nimport noResultTemplate from '@Components/Template/no-result'\nimport service from '@Services/app-service'\nimport config from '@Config/app.config'\nimport dataTable from '@Components/DataTable'\nimport myInput from '@Components/Form/my-input'\nimport myAction from '@Components/Form/my-action'\nimport myAutoComplete from '@Components/Form/my-autocomp'\nexport default {\n  props: {\n    // templateName: {\n    //   type: String,\n    //   required: true\n    // }\n  },\n  components: {\n    breadcrumbBar,\n    optionDetailTemplate,\n    noResultTemplate,\n    dataTable,\n    myInput,\n    myAction,\n    myAutoComplete\n  },\n  name: 'OrderingGroup',\n  data () {\n    return {\n      local: {\n        pageObj: {\n          items: [\n            {name: 'กลุ่มวัสดุ', route: 'OrderingGroup', key: 'xxx', active: true, icon: 'fa fa-folder-open-o'}\n          ],\n          template: {\n            class: 'ordering-group-page'\n          }\n        },\n        statusSearch: [],\n        idSelected: '',\n        inputs: {\n          id: null,\n          name: null,\n          houseId: null,\n          lists: []\n        },\n        lists: [],\n        materials: {},\n        materialMainSearch: '',\n        materialStatusSelected: '',\n        houseTemplate: {\n          inputs: [],\n          selected: null\n        }\n      }\n    }\n  },\n  computed: {\n    resourceName () {\n      return config.api.materialGroup.index\n    }\n  },\n  updated () {\n  },\n  created () {\n    this.fetchData()\n  },\n  methods: {\n    // async getMaterialItems () {\n    //   let params = []\n    //   params['main_search'] = this.local.materialMainSearch\n    //   let queryString = this.BUILDPARAM(params)\n    //   let materials = await service.getResource({resourceName: config.api.material.dropdown, queryString})\n    //   this.local.materials = materials.data\n    // },\n    async fetchData () {\n      let queryString = this.BUILDPARAM()\n      let houseTemplate = await service.getResource({resourceName: config.api.house.dropdown, queryString})\n      this.local.houseTemplate.inputs = houseTemplate.data\n    },\n    houseSelectedHandle (objVal) {\n      if (objVal === null) {\n        this.local.inputs.lists = this.local.lists\n        return\n      }\n      this.local.houseTemplate.selected = objVal\n      this.local.inputs.houseId = objVal.key\n      this.local.inputs.lists = this.local.lists.filter(item => {\n        return item.houseId === objVal.key\n      })\n      // console.log(this.local.inputs.lists)\n    },\n    selectedDataHandle (item) {\n      this.local.idSelected = item.id\n      this.local.inputs.id = item.id\n      this.local.inputs.name = item.name\n      this.local.inputs.lists = item.detail.map(itemDetail => {\n        return {\n          materialId: itemDetail.material_id,\n          amount: itemDetail.amount,\n          houseId: itemDetail.house_id,\n          materialName: itemDetail.name\n        }\n      })\n      this.local.lists = this.local.inputs.lists\n    },\n    deleteListsItem (index) {\n      this.local.inputs.lists.splice(index, 1)\n    },\n    cleanInput () {\n      this.local.idSelected = null\n      this.local.inputs.id = null\n      this.local.inputs.name = null\n      this.local.inputs.lists = []\n    },\n    async submitForm (type) {\n      let isValid = await this.$validator.validateAll()\n      let resourceName = this.resourceName\n      if (type === 'update' && this.local.idSelected === 'new') type = 'save'\n      let data = {}\n      let res = null\n      switch (type) {\n        case 'add':\n          this.cleanInput()\n          this.local.idSelected = 'new'\n          return\n        case 'cancel':\n          this.cleanInput()\n          return\n        case 'update':\n          if (!isValid) return\n          data = this.local.inputs\n          resourceName = `${resourceName}/${this.local.idSelected}`\n          res = await service.putResource({data, resourceName})\n          break\n        case 'delete':\n          resourceName = `${resourceName}/${this.local.idSelected}`\n          let queryString = []\n          res = await service.deleteResource({resourceName, queryString})\n          break\n        case 'save':\n          if (!isValid) return\n          data = this.local.inputs\n          res = await service.postResource({data, resourceName})\n          break\n      }\n      if (res.status === 200) {\n        this.reloadTable()\n        this.cleanInput()\n        this.local.idSelected = ''\n        this.NOTIFY('success')\n        return\n      }\n      this.NOTIFY('error')\n    },\n    // addItemsList () {\n    //   this.local.inputs.lists.push({\n    //     amount: 8,\n    //     materialId: 3\n    //   })\n    // },\n    reloadTable () {\n      this.$refs.dataTable.fetchData()\n    },\n    itemSelectedHandle () {\n      //\n    }\n    // searchValueHandle (val) {\n    //   this.local.materialMainSearch = val\n    //   this.getMaterialItems()\n    // }\n    // filterByStatus (key) {\n    //   this.local.materialStatusSelected = key\n    //   this.getMaterialItems()\n    // }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/Pages/Ordering/group.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('option-detail-template',{ref:\"template\",attrs:{\"isSelected\":_vm.local.idSelected,\"templateObj\":_vm.local.pageObj.template},on:{\"cancleForm\":function($event){_vm.submitForm('cancel')}}},[_c('template',{slot:\"title\"},[_c('breadcrumb-bar',{attrs:{\"dataObj\":_vm.local.pageObj}})],1),_vm._v(\" \"),_c('template',{slot:\"data-table\"},[_c('data-table',{ref:\"dataTable\",attrs:{\"tableType\":\"normal\",\"resourceName\":_vm.resourceName,\"statusSearch\":_vm.local.statusSearch},on:{\"selectedData\":_vm.selectedDataHandle}})],1),_vm._v(\" \"),_c('template',{slot:\"function\"},[_c('button',{staticClass:\"button is-link\",on:{\"click\":function($event){_vm.submitForm('add')}}},[_vm._v(\"เพิ่มข้อมูลใหม่\")])]),_vm._v(\" \"),(_vm.local.idSelected)?[_c('template',{slot:\"detail\"},[_c('div',{staticClass:\"container-block detail-block\"},[_c('div',{staticClass:\"block result\"},[_c('div',{staticClass:\"title-name\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"กลุ่มวัสดุ\")]),_vm._v(\" \"),_c('my-input',{attrs:{\"value\":_vm.local.inputs.name,\"inputObj\":{type: 'text', name: 'order_group', placeholder: 'ชื่อกลุ่มวัสดุ', validate: 'required'},\"validator\":_vm.$validator},on:{\"input\":function (value) { _vm.local.inputs.name = value }}})],1),_vm._v(\" \"),_c('div',{staticClass:\"items\"},[_c('table',{staticClass:\"transparent-table\"},[_c('thead',[_c('tr',[_c('td',{attrs:{\"width\":\"200\"}},[_c('my-auto-complete',{attrs:{\"arrInputs\":_vm.local.houseTemplate.inputs,\"placeholder\":\"ค้นหาแบบบ้าน\",\"label\":\"\"},on:{\"select\":_vm.houseSelectedHandle}})],1),_vm._v(\" \"),_c('td',[_vm._v(\"รายการ\")]),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"40\"}},[_vm._v(\"จำนวน\")]),_vm._v(\" \"),_c('td')])]),_vm._v(\" \"),(_vm.local.inputs.lists.length)?_c('tbody',_vm._l((_vm.local.inputs.lists),function(item,index){return _c('tr',{key:index},[_c('td',[_vm._v(_vm._s(item.houseId))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(item.materialName))]),_vm._v(\" \"),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.amount),expression:\"item.amount\"}],staticClass:\"input\",attrs:{\"type\":\"number\",\"size\":\"2\"},domProps:{\"value\":(item.amount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(item, \"amount\", $event.target.value)}}})])])})):_vm._e()])])])]),_vm._v(\" \"),_c('div',{staticClass:\"container-block footer-panel\"},[_c('my-action',{attrs:{\"type\":\"update\",\"obj\":{title: 'บันทึกข้อมูล'}},on:{\"clickEvent\":function($event){_vm.submitForm('update')}}}),_vm._v(\" \"),_c('my-action',{attrs:{\"type\":\"delete\",\"obj\":{title: 'ลบข้อมูล'}},on:{\"clickEvent\":function($event){_vm.submitForm('delete')}}})],1)])]:_c('template',{slot:\"detail\"},[_c('no-result-template')],1)],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-58c95505\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/Pages/Ordering/group.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-58c95505\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./group.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./group.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./group.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-58c95505\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./group.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Pages/Ordering/group.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}