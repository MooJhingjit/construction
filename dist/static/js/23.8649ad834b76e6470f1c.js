webpackJsonp([23],{"6mLU":function(e,t){},rmur:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),l=a("exGp"),c=a.n(l),i=a("woOf"),o=a.n(i),s=a("ujS/"),u=a("O/8C"),d=a("ikD4"),p=a("kVPM"),m=a("Y3eR"),b=a("7Dwl"),v=a("7x59"),f={props:{},components:{breadcrumbBar:s.a,optionDetailTemplate:u.a,dataTable:m.a,myInput:b.a,myAction:v.a},name:"UserPage",data:function(){return{local:{pageObj:{items:[{name:"จ่ายค่างวด",route:"PayingPeriod",key:"",active:!1,icon:"fa fa-exchange"},{name:"หมวดงาน",route:"WorkGroup",key:"",active:!0,icon:""}],template:{class:"workgroup-page"}},isOptionMinimize:!1,idSelected:"",inputs:{}},server:{}}},computed:{resourceName:function(){return p.a.api.workGroup.index}},created:function(){},methods:{selectedDataHandle:function(e){this.errors.clear(),this.local.idSelected=e.id,this.local.inputs=o()({},e),this.local.submitMode="update"},submitForm:function(e){var t=this;return c()(r.a.mark(function a(){var n,l,c,i,o;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$validator.validateAll();case 2:n=a.sent,l=t.resourceName,"update"===e&&"new"===t.local.idSelected&&(e="save"),c={},i=null,a.t0=e,a.next="add"===a.t0?10:"cancel"===a.t0?13:"update"===a.t0?15:"delete"===a.t0?23:"save"===a.t0?29:36;break;case 10:return t.local.idSelected="new",t.cleanInput(),a.abrupt("return");case 13:return t.local.idSelected=null,a.abrupt("return");case 15:if(n&&!t.local.isDuplicate){a.next=17;break}return a.abrupt("return");case 17:return c=t.local.inputs,l=l+"/"+t.local.idSelected,a.next=21,d.a.putResource({data:c,resourceName:l});case 21:return i=a.sent,a.abrupt("break",36);case 23:return l=l+"/"+t.local.idSelected,o=[],a.next=27,d.a.deleteResource({resourceName:l,queryString:o});case 27:return i=a.sent,a.abrupt("break",36);case 29:if(n&&!t.local.isDuplicate){a.next=31;break}return a.abrupt("return");case 31:return c=t.local.inputs,a.next=34,d.a.postResource({data:c,resourceName:l});case 34:return i=a.sent,a.abrupt("break",36);case 36:if(200!==i.status){a.next=42;break}return t.$refs.dataTable.fetchData(),t.cleanInput(),t.local.idSelected="",t.NOTIFY("success"),a.abrupt("return");case 42:t.NOTIFY("error");case 43:case"end":return a.stop()}},a,t)}))()},cleanInput:function(){for(var e in this.local.inputs)this.local.inputs[e]=""}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("option-detail-template",{attrs:{templateObj:e.local.pageObj.template,isSelected:e.local.idSelected},on:{cancleForm:function(t){e.submitForm("cancel")}}},[a("template",{slot:"title"},[a("breadcrumb-bar",{attrs:{dataObj:e.local.pageObj}})],1),e._v(" "),a("template",{slot:"data-table"},[a("data-table",{ref:"dataTable",attrs:{tableType:"normal",resourceName:e.resourceName,statusSearch:e.local.statusSearch},on:{selectedData:e.selectedDataHandle}})],1),e._v(" "),a("template",{slot:"function"},[a("button",{staticClass:"button is-link",on:{click:function(t){e.submitForm("add")}}},[e._v("เพิ่มข้อมูลใหม่")])]),e._v(" "),""!=e.local.idSelected?[a("template",{slot:"detail"},[a("div",{staticClass:"container-block  detail-block"},[a("div",{staticClass:"form-detail"},[a("div",{staticClass:"container-block"},[a("div",{staticClass:"text-title"},[e._v("หมวดงาน")]),e._v(" "),a("div",{staticClass:"value"},[a("my-input",{attrs:{value:e.local.inputs.name,inputObj:{type:"text",name:"user_name",placeholder:"ชื่อหมวดงาน",validate:"required"},validator:e.$validator},on:{input:function(t){e.local.inputs.name=t}}})],1)])])]),e._v(" "),a("div",{staticClass:"container-block footer-panel"},[a("my-action",{attrs:{type:"link",obj:{title:"รายการ"}},on:{clickEvent:function(t){e.GOTOPAGE("WorkGroupDetails",e.local.idSelected)}}}),e._v(" "),a("my-action",{attrs:{type:"update",obj:{title:"บันทึกข้อมูล"}},on:{clickEvent:function(t){e.submitForm("update")}}}),e._v(" "),"new"!=e.local.idSelected?a("my-action",{attrs:{type:"delete",obj:{title:"ลบข้อมูล"}},on:{clickEvent:function(t){e.submitForm("delete")}}}):e._e()],1)])]:a("template",{slot:"detail"})],2)},staticRenderFns:[]};var x=a("VU/8")(f,k,!1,function(e){a("6mLU")},null,null);t.default=x.exports}});
//# sourceMappingURL=23.8649ad834b76e6470f1c.js.map