{"version":3,"sources":["webpack:///src/Components/Form/my-tags-selection.vue","webpack:///./src/Components/Form/my-tags-selection.vue?e7cd","webpack:///./src/Components/Form/my-tags-selection.vue","webpack:///src/Pages/Workorder/edit.vue","webpack:///./src/Pages/Workorder/edit.vue?9d75","webpack:///./src/Pages/Workorder/edit.vue"],"names":["my_tags_selection","Object","String","Array","fetchData","_this","this","resourceName","data","getFilterResult","id","tagsArr","_this2","Form_my_tags_selection","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","icon","_v","label","objInputs","maxtags","local","filteredTags","autocomplete","field","placeholder","on","add","changeItems","remove","typing","getFilteredTags","scopedSlots","_u","key","fn","props","_s","option","name","model","value","callback","$$v","$set","expression","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","edit","breadcrumbBar","Breadcrumb","myInput","my_input","myAction","my_action","myTagsSelection","myAutoComplete","my_autocomp","route","active","$route","params","time","index","queryString","then","res","pre_order","order","post_order","condition","workOrderTemplate","catch","pop","validateAll","type","_context2","t0","isValid","itemTime","itemPreOrder","itemLists","selected","houseId","obj","_this3","Workorder_edit","class","pageObj","template","dataObj","config","getNullVal","arrInputs","houseTemplate","inputs","select","houseSelectedHandle","_m","_l","item","taskName","inputObj","validate","validator","$validator","input","getCondition","setCondition","materialGroupResource","itemSelected","postOrder","click","$event","deleteTime","_e","editRow","aria-hidden","title","clickEvent","submitForm","width"],"mappings":"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","file":"static/js/5.48c195b32b98f931c07a.js","sourcesContent":["<template>\n  <section>\n    <b-dropdown>\n      <button class=\"button\" slot=\"trigger\">\n        <b-icon icon=\"list\"></b-icon>\n        <!-- <span>เพิ่ม</span> -->\n      </button>\n      <section>\n        <b-field :label=\"objInputs.label\">\n            <b-taginput\n                :maxtags=\"objInputs.maxtags\"\n                v-model=\"local.tags\"\n                :data=\"local.filteredTags\"\n                autocomplete\n                field=\"name\"\n                icon=\"search\"\n                :placeholder=\"objInputs.placeholder\"\n                @add=\"changeItems\"\n                @remove=\"changeItems\"\n                @typing=\"getFilteredTags\">\n                <template slot-scope=\"props\">\n                    <strong>{{props.option.name}}</strong>\n                </template>\n                <template slot=\"empty\">\n                    ไม่พบข้อมูล\n                </template>\n            </b-taginput>\n        </b-field>\n        <!-- <pre style=\"max-height: 400px\"><b>Tags:</b>{{ local.tags }}</pre> -->\n    </section>\n    </b-dropdown>\n  </section>\n</template>\n\n<script>\nimport service from '@Services/app-service'\nexport default {\n  props: {\n    objInputs: {\n      type: Object,\n      required: true\n    },\n    resourceName: {\n      type: String,\n      required: true\n    },\n    itemSelected: {\n      type: Array,\n      required: false\n    }\n  },\n  data () {\n    return {\n      local: {\n        data: [],\n        filteredTags: [],\n        isSelectOnly: false,\n        tags: [],\n        maxDefault: this.maxtags || 20\n      }\n    }\n  },\n  computed: {\n  },\n  created () {\n    this.fetchData()\n  },\n  methods: {\n    async fetchData () {\n      let resourceName = this.resourceName\n      let materialGroup = await service.getResource({resourceName, queryString: [this.BUILDPARAM({type: 'selection'})]})\n      this.local.data = materialGroup.data\n      this.getFilterResult()\n    },\n    getFilteredTags (text) {\n      this.local.filteredTags = this.local.data.filter((option) => {\n        return option.name.indexOf(text) >= 0\n      })\n    },\n    changeItems () {\n      let tagsArr = []\n      this.local.tags.map(item => {\n        tagsArr.push(item.id)\n      })\n      this.$emit('selected', tagsArr)\n    },\n    getFilterResult () {\n      if (this.itemSelected === null || this.itemSelected === undefined) return []\n      this.local.tags = this.local.data.filter(item => {\n        return this.itemSelected.includes(item.id)\n      })\n    }\n  },\n  watch: {\n    itemSelected () {\n      this.getFilterResult()\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/Components/Form/my-tags-selection.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('b-dropdown',[_c('button',{staticClass:\"button\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('b-icon',{attrs:{\"icon\":\"list\"}})],1),_vm._v(\" \"),_c('section',[_c('b-field',{attrs:{\"label\":_vm.objInputs.label}},[_c('b-taginput',{attrs:{\"maxtags\":_vm.objInputs.maxtags,\"data\":_vm.local.filteredTags,\"autocomplete\":\"\",\"field\":\"name\",\"icon\":\"search\",\"placeholder\":_vm.objInputs.placeholder},on:{\"add\":_vm.changeItems,\"remove\":_vm.changeItems,\"typing\":_vm.getFilteredTags},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('strong',[_vm._v(_vm._s(props.option.name))])]}}]),model:{value:(_vm.local.tags),callback:function ($$v) {_vm.$set(_vm.local, \"tags\", $$v)},expression:\"local.tags\"}},[_c('template',{slot:\"empty\"},[_vm._v(\"\\n                  ไม่พบข้อมูล\\n              \")])],2)],1)],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8c4086f6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/Components/Form/my-tags-selection.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8c4086f6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./my-tags-selection.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./my-tags-selection.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./my-tags-selection.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8c4086f6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./my-tags-selection.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-8c4086f6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Components/Form/my-tags-selection.vue\n// module id = null\n// module chunks = ","<template>\n    <section :class=\"['section', local.pageObj.template.class]\">\n      <breadcrumb-bar :dataObj=\"local.pageObj\"></breadcrumb-bar>\n      <div class=\"container-block\">\n        <div class=\"detail-panel\">\n          <template v-if=\"true\">\n            <div class=\"container-block detail-block\">\n              <div class=\"c-body\">\n                <div class=\"items\">\n                  <div class=\"item\">\n                    <div class=\"item-header container-block\">\n                      <div class=\"time block\">งวดที่ {{local.time}}</div>\n                      <div class=\"order-name container-block block\">\n                        <span class=\"name\">แบบบ้าน</span>\n                        <my-auto-complete\n                        @select=\"houseSelectedHandle\"\n                        :config=\"{getNullVal: false}\"\n                        :arrInputs=\"local.houseTemplate.inputs\"\n                        placeholder=\"ค้นหาแบบบ้าน\"\n                        label=\"\"\n                        ></my-auto-complete>\n                        <!-- <span class=\"name\">รายการสั่งซื้อก่อนหน้างวดที่ {{local.time}} </span>\n                        <my-tags-selection\n                        v-if=\"local.itemTime\"\n                        :objInputs=\"{label: 'เลือกกลุ่มวัสดุ', placeholder: 'เพิ่มกลุ่มวัสดุ', maxtags: '1'}\"\n                        :resourceName=\"materialGroupResource\"\n                        :itemSelected=\"local.itemPreOrder\"\n                        @selected=\"value => { local.itemPreOrder = value }\"\n                        ></my-tags-selection> -->\n                      </div>\n                    </div>\n                    <div class=\"item-body\" v-if=\"local.houseTemplate.selected !== null\">\n                      <table>\n                        <thead>\n                          <tr>\n                            <td>#</td>\n                            <td>รายละเอียดงาน</td>\n                            <td width=\"80\">เงื่อนไขการเริ่ม</td>\n                            <td width=\"80\">ระยะเวลา (ก่อน)</td>\n                            <td width=\"80\">ระยะเวลา (หลัง)</td>\n                            <td width=\"50\"></td>\n                            <td width=\"50\"></td>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          <tr :key=\"index\" v-for=\"(item, index) in local.itemLists\">\n                            <td>\n                              {{item.order}}\n                            </td>\n                            <td>\n                              <my-input\n                                :value=\"item.taskName\"\n                                :inputObj=\"{type: 'text', name: `order_group_${index}`, placeholder: 'ระบุรายละเอียดงาน', validate: 'required'}\"\n                                :validator=\"$validator\"\n                                @input=\"value => { item.taskName = value }\"\n                                ></my-input>\n                            </td>\n                            <td>\n                              <my-input\n                                :value=\"getCondition(item.condition, 'condition')\"\n                                :inputObj=\"{type: 'text', name: `order_condition_${index}`, placeholder: '', validate: ''}\"\n                                :validator=\"$validator\"\n                                @input=\"value => setCondition(index, value, 'condition', item)\"\n                                ></my-input>\n                            </td>\n                            <td>\n                              <my-input\n                                :value=\"getCondition(item.condition, 'preiod')\"\n                                :inputObj=\"{type: 'text', name: `order_preiod_${index}`, placeholder: '', validate: 'required'}\"\n                                :validator=\"$validator\"\n                                @input=\"value => setCondition(index, value, 'preiod', item)\"\n                                ></my-input>\n                            </td>\n                            <td>\n                              <my-input\n                                :value=\"getCondition(item.condition, 'preiod_end')\"\n                                :inputObj=\"{type: 'text', name: `order_preiod_end_${index}`, placeholder: '', validate: 'required'}\"\n                                :validator=\"$validator\"\n                                @input=\"value => setCondition(index, value, 'preiod_end', item)\"\n                                ></my-input>\n                            </td>\n                            <td>\n                              <my-tags-selection\n                              :objInputs=\"{label: 'เลือกกลุ่มวัสดุ', placeholder: 'เพิ่มกลุ่มวัสดุ', maxtags: '1'}\"\n                              :resourceName=\"materialGroupResource\"\n                              :itemSelected=\"item.postOrder\"\n                              @selected=\"value => { item.postOrder = value }\"\n                              ></my-tags-selection>\n                            </td>\n                            <td>\n                              <button @click=\"deleteTime(index)\" class=\"button is-danger\">\n                                <i class=\"fa fa-trash\"></i>\n                              </button>\n                            </td>\n                          </tr>\n                        </tbody>\n                      </table>\n                    </div>\n                    <div class=\"item-footer container-block\" v-if=\"local.houseTemplate.selected !== null\">\n                      <div class=\"container-block block right\">\n                        <!-- <button class=\"button\" @click=\"editRow('remove')\"><i class=\"fa fa-minus\" aria-hidden=\"true\"></i></button> -->\n                        <button class=\"button\" @click=\"editRow('add')\"><i class=\"fa fa-plus\" aria-hidden=\"true\"></i></button>\n                      </div>\n                       <div class=\"container-block block action\">\n                        <my-action\n                          type=\"update\"\n                          :obj=\"{title: `บันทึกข้อมูลงวดที่ ${local.time}`}\"\n                          @clickEvent=\"submitForm('update')\"\n                        >\n                        </my-action>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </template>\n          <template v-else>\n            <template slot=\"detail\">\n              <div class=\"container-block empty-panel\">\n                <div class=\"block container-block\">\n                  <div class=\"block no-data\">\n                      ไม่พบข้อมูลที่ต้องการ\n                  </div>\n                  <div class=\"block select-data\">\n                    <i class=\"fa fa-hand-o-left\" aria-hidden=\"true\"></i>\n                    <span>เลือกข้อมูลทางซ้ายมือเพื่อแสดง</span>\n                  </div>\n                  <div class=\"block or\">\n                    หรือ\n                  </div>\n                  <div class=\"block add-data\">\n                    <button class=\"button\">เพิ่มข้อมูลใหม่</button>\n                  </div>\n                </div>\n              </div>\n            </template>\n          </template>\n        </div>\n      </div>\n    </section>\n</template>\n\n<script>\nimport breadcrumbBar from '@Components/Breadcrumb'\nimport service from '@Services/app-service'\nimport config from '@Config/app.config'\n// import inputSearchSelect from '@Components/Form/search-select'\nimport myInput from '@Components/Form/my-input'\nimport myAction from '@Components/Form/my-action'\nimport myTagsSelection from '@Components/Form/my-tags-selection'\nimport myAutoComplete from '@Components/Form/my-autocomp'\nexport default {\n  props: {\n  },\n  components: {\n    breadcrumbBar,\n    myInput,\n    myAction,\n    myTagsSelection,\n    myAutoComplete\n  },\n  name: 'EditWorkOrderPage',\n  data () {\n    return {\n      local: {\n        pageObj: {\n          items: [\n            {name: 'ลำดับการทำงาน', route: 'Workorder', key: '', active: false, icon: 'fa fa-tasks'},\n            {name: 'แก้ไข', route: 'EditWorkorder', key: this.$route.params.key, active: true, icon: ''}\n          ],\n          template: {\n            class: 'edit-work-order-page'\n          }\n        },\n        time: this.$route.params.key,\n        workOrderTemplate: {\n          time: this.time,\n          preOrder: [],\n          lists: [{\n            order: '',\n            taskName: '',\n            postOrder: []\n          }]\n          // material_group: []\n        },\n        itemPreOrder: null,\n        itemTime: null,\n        itemLists: [],\n        materialGroup: {\n          mainSearch: ''\n        },\n        houseTemplate: {\n          inputs: [],\n          selected: null\n        }\n      }\n    }\n  },\n  computed: {\n    resourceName () {\n      return config.api.workOrder.index\n    },\n    materialGroupResource () {\n      return config.api.materialGroup.index\n    }\n  },\n  created () {\n    this.fetchData()\n  },\n  methods: {\n    async fetchData () {\n      let queryString = {}\n      let houseTemplate = await service.getResource({resourceName: config.api.house.dropdown, queryString})\n      this.local.houseTemplate.inputs = houseTemplate.data\n      let resourceName = `${config.api.workOrder.index}/${this.$route.params.key}`\n      queryString = this.BUILDPARAM({type: 'full'})\n      service.getResource({resourceName, queryString})\n        .then((res) => {\n          if (res.status === 200) {\n            if (res.data) {\n              this.local.itemTime = res.data.time\n              this.local.itemPreOrder = [res.data.pre_order]\n              this.local.itemLists = res.data.lists.map(item => {\n                return {\n                  order: item.order,\n                  taskName: item.name,\n                  postOrder: [item.post_order],\n                  condition: item.condition\n                }\n              })\n            } else {\n              this.local.item.push(this.local.workOrderTemplate)\n            }\n          }\n        })\n        .catch(() => {\n        })\n    },\n    editRow (type) {\n      if (type === 'add') {\n        this.local.itemLists.push({\n          order: this.local.itemLists.length + 1,\n          taskName: '',\n          postOrder: []\n        })\n      } else {\n        this.local.itemLists.pop()\n      }\n    },\n    deleteTime (indexOfOrder) {\n      this.local.itemLists.splice(indexOfOrder, 1)\n    },\n    async submitForm (type) {\n      let isValid = await this.$validator.validateAll()\n      let resourceName = this.resourceName\n      let data = {}\n      let res = null\n      switch (type) {\n        case 'update':\n          if (!isValid) return\n          data = {\n            time: this.local.itemTime,\n            pre_order: this.local.itemPreOrder,\n            workOrderLists: this.local.itemLists\n          }\n          resourceName = `${resourceName}/${this.$route.params.key}`\n          res = await service.putResource({data, resourceName})\n          break\n        case 'delete':\n          resourceName = `${resourceName}/${this.$route.params.key}`\n          let queryString = []\n          res = await service.deleteResource({resourceName, queryString})\n          break\n      }\n      if (res.status === 200) {\n        this.fetchData()\n        this.NOTIFY('success')\n        return\n      }\n      this.NOTIFY('error')\n    },\n    houseSelectedHandle (objVal) {\n      if (objVal === null) {\n        return\n      }\n      this.local.houseTemplate.selected = objVal.key\n    },\n    setCondition (index, value, type, fullItem) {\n      let houseId = this.local.houseTemplate.selected\n      let exist = false\n      if (this.local.itemLists[index].condition !== undefined) {\n        this.local.itemLists[index].condition.map((item) => {\n          if (item.house_id === houseId) {\n            exist = true\n            item[type] = value\n          }\n        })\n      }\n      if (!exist) {\n        this.local.itemLists[index].condition = []\n        let obj = {\n          house_id: houseId,\n          order: fullItem.order,\n          work_order_time: this.local.time,\n          preiod: null,\n          preiod_end: null,\n          condition: null\n        }\n        obj[type] = value\n        this.local.itemLists[index].condition.push(obj)\n      }\n    },\n    getCondition (condition, type) {\n      if (this.local.houseTemplate.selected === null || condition === undefined) return ''\n      let obj = condition.filter((item) => {\n        return item.house_id === this.local.houseTemplate.selected\n      })[0]\n      if (obj === undefined) return ''\n      return obj[type]\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/Pages/Workorder/edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{class:['section', _vm.local.pageObj.template.class]},[_c('breadcrumb-bar',{attrs:{\"dataObj\":_vm.local.pageObj}}),_vm._v(\" \"),_c('div',{staticClass:\"container-block\"},[_c('div',{staticClass:\"detail-panel\"},[(true)?[_c('div',{staticClass:\"container-block detail-block\"},[_c('div',{staticClass:\"c-body\"},[_c('div',{staticClass:\"items\"},[_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"item-header container-block\"},[_c('div',{staticClass:\"time block\"},[_vm._v(\"งวดที่ \"+_vm._s(_vm.local.time))]),_vm._v(\" \"),_c('div',{staticClass:\"order-name container-block block\"},[_c('span',{staticClass:\"name\"},[_vm._v(\"แบบบ้าน\")]),_vm._v(\" \"),_c('my-auto-complete',{attrs:{\"config\":{getNullVal: false},\"arrInputs\":_vm.local.houseTemplate.inputs,\"placeholder\":\"ค้นหาแบบบ้าน\",\"label\":\"\"},on:{\"select\":_vm.houseSelectedHandle}})],1)]),_vm._v(\" \"),(_vm.local.houseTemplate.selected !== null)?_c('div',{staticClass:\"item-body\"},[_c('table',[_vm._m(0),_vm._v(\" \"),_c('tbody',_vm._l((_vm.local.itemLists),function(item,index){return _c('tr',{key:index},[_c('td',[_vm._v(\"\\n                          \"+_vm._s(item.order)+\"\\n                        \")]),_vm._v(\" \"),_c('td',[_c('my-input',{attrs:{\"value\":item.taskName,\"inputObj\":{type: 'text', name: (\"order_group_\" + index), placeholder: 'ระบุรายละเอียดงาน', validate: 'required'},\"validator\":_vm.$validator},on:{\"input\":function (value) { item.taskName = value }}})],1),_vm._v(\" \"),_c('td',[_c('my-input',{attrs:{\"value\":_vm.getCondition(item.condition, 'condition'),\"inputObj\":{type: 'text', name: (\"order_condition_\" + index), placeholder: '', validate: ''},\"validator\":_vm.$validator},on:{\"input\":function (value) { return _vm.setCondition(index, value, 'condition', item); }}})],1),_vm._v(\" \"),_c('td',[_c('my-input',{attrs:{\"value\":_vm.getCondition(item.condition, 'preiod'),\"inputObj\":{type: 'text', name: (\"order_preiod_\" + index), placeholder: '', validate: 'required'},\"validator\":_vm.$validator},on:{\"input\":function (value) { return _vm.setCondition(index, value, 'preiod', item); }}})],1),_vm._v(\" \"),_c('td',[_c('my-input',{attrs:{\"value\":_vm.getCondition(item.condition, 'preiod_end'),\"inputObj\":{type: 'text', name: (\"order_preiod_end_\" + index), placeholder: '', validate: 'required'},\"validator\":_vm.$validator},on:{\"input\":function (value) { return _vm.setCondition(index, value, 'preiod_end', item); }}})],1),_vm._v(\" \"),_c('td',[_c('my-tags-selection',{attrs:{\"objInputs\":{label: 'เลือกกลุ่มวัสดุ', placeholder: 'เพิ่มกลุ่มวัสดุ', maxtags: '1'},\"resourceName\":_vm.materialGroupResource,\"itemSelected\":item.postOrder},on:{\"selected\":function (value) { item.postOrder = value }}})],1),_vm._v(\" \"),_c('td',[_c('button',{staticClass:\"button is-danger\",on:{\"click\":function($event){_vm.deleteTime(index)}}},[_c('i',{staticClass:\"fa fa-trash\"})])])])}))])]):_vm._e(),_vm._v(\" \"),(_vm.local.houseTemplate.selected !== null)?_c('div',{staticClass:\"item-footer container-block\"},[_c('div',{staticClass:\"container-block block right\"},[_c('button',{staticClass:\"button\",on:{\"click\":function($event){_vm.editRow('add')}}},[_c('i',{staticClass:\"fa fa-plus\",attrs:{\"aria-hidden\":\"true\"}})])]),_vm._v(\" \"),_c('div',{staticClass:\"container-block block action\"},[_c('my-action',{attrs:{\"type\":\"update\",\"obj\":{title: (\"บันทึกข้อมูลงวดที่ \" + (_vm.local.time))}},on:{\"clickEvent\":function($event){_vm.submitForm('update')}}})],1)]):_vm._e()])])])])]:[_c('template',{slot:\"detail\"},[_vm._m(1)])]],2)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('td',[_vm._v(\"#\")]),_vm._v(\" \"),_c('td',[_vm._v(\"รายละเอียดงาน\")]),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"80\"}},[_vm._v(\"เงื่อนไขการเริ่ม\")]),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"80\"}},[_vm._v(\"ระยะเวลา (ก่อน)\")]),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"80\"}},[_vm._v(\"ระยะเวลา (หลัง)\")]),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"50\"}}),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"50\"}})])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-block empty-panel\"},[_c('div',{staticClass:\"block container-block\"},[_c('div',{staticClass:\"block no-data\"},[_vm._v(\"\\n                  ไม่พบข้อมูลที่ต้องการ\\n              \")]),_vm._v(\" \"),_c('div',{staticClass:\"block select-data\"},[_c('i',{staticClass:\"fa fa-hand-o-left\",attrs:{\"aria-hidden\":\"true\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"เลือกข้อมูลทางซ้ายมือเพื่อแสดง\")])]),_vm._v(\" \"),_c('div',{staticClass:\"block or\"},[_vm._v(\"\\n                หรือ\\n              \")]),_vm._v(\" \"),_c('div',{staticClass:\"block add-data\"},[_c('button',{staticClass:\"button\"},[_vm._v(\"เพิ่มข้อมูลใหม่\")])])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-71c75c08\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/Pages/Workorder/edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-71c75c08\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./edit.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-71c75c08\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Pages/Workorder/edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}