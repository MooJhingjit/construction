webpackJsonp([4],{"62YR":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Xxa5"),n=e.n(s),c=e("exGp"),o=e.n(c),i=e("ujS/"),l=e("O/8C"),r=e("ikD4"),d=e("kVPM"),u=e("uvJ5"),v={props:{},components:{myAction:e("7x59").a,ModelPanel:u.a,breadcrumbBar:i.a,optionDetailTemplate:l.a},name:"FrontSiteUpdatePage",data:function(){return{local:{pageObj:{items:[{name:"ไชต์งานหลัก",route:"FrontSite",key:"",active:!1,icon:"fa fa-home"},{name:"อัพเดทสถานะ",route:"FrontSiteUpdate",key:this.$route.params.key,active:!0,icon:""}]},project:null,contract:null,progress:null,modelData:null}}},computed:{},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return o()(n.a.mark(function a(){var e,s,c;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=d.a.api.frontSite.index+"/"+t.$route.params.key,s=[],a.next=4,r.a.getResource({resourceName:e,queryString:s});case 4:c=a.sent,t.local.project=c.data.project,t.local.contract=c.data.contract,t.local.time=c.data.time;case 8:case"end":return a.stop()}},a,t)}))()},showTaskDetail:function(t){this.$refs.modelPanel.isActive=!0,this.local.modelData=t},updateTask:function(t){var a=this;return o()(n.a.mark(function e(){var s,c;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.a.api.frontSite.index+"/"+a.$route.params.key,(c=t).houseId=a.local.contract.house_id,e.next=5,r.a.putResource({data:c,resourceName:s});case 5:200===e.sent.status&&(a.NOTIFY("success"),a.fetchData());case 7:case"end":return e.stop()}},e,a)}))()}}},_={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"section front-site-update-page"},[e("breadcrumb-bar",{attrs:{dataObj:t.local.pageObj}}),t._v(" "),null!=t.local.project?e("div",{staticClass:"container-block"},[e("article",{staticClass:"tile is-child notification"},[e("div",{staticClass:"project-name"},[t._v(t._s(t.local.project.name)+" ("+t._s(t.local.contract.code)+")")]),t._v(" "),e("div",{staticClass:"todo-lists"},[e("table",{staticClass:"table is-bordered"},[t._m(0),t._v(" "),e("tbody",t._l(t.local.time,function(a,s){return e("tr",{key:s,class:{success:a.is_success}},[e("td",[t._v(t._s(a.time))]),t._v(" "),e("td",{staticClass:"list"},t._l(a.progress,function(a,s){return e("div",{key:s},[e("div",{staticClass:"task"},[t._v(t._s(a.order)+". "+t._s(a.name)+" "),e("span",{staticClass:"detail",on:{click:function(e){t.showTaskDetail(a)}}},[t._v("[รายละเอียด]")])])])})),t._v(" "),e("td",{staticClass:"status",attrs:{width:"70"}},t._l(a.progress,function(a,s){return e("div",{key:s},["done"===a.status?[e("i",{staticClass:"fa fa-check-square-o",attrs:{"aria-hidden":"true"}})]:[e("my-action",{attrs:{type:"null",obj:{title:"อัพเดท",color:"button is-outlined",isConfirm:!0}},on:{clickEvent:function(e){t.updateTask(a)}}})]],2)}))])}))])])])]):t._e(),t._v(" "),e("model-panel",{ref:"modelPanel"},[null!=t.local.modelData?e("div",{staticClass:"model"},[e("div",[t._v("เลขที่สัญญา: "),e("span",[t._v(t._s(t.local.modelData.contract_code))])]),t._v(" "),e("div",[t._v("งวด: "),e("span",[t._v(t._s(t.local.modelData.time))])]),t._v(" "),e("div",[t._v("งาน: "),e("span"),t._v(" "+t._s(t.local.modelData.order_all)+" "),e("span",[t._v(t._s(t.local.modelData.name))])]),t._v(" "),e("div",[t._v("กำหนดเริ่ม (ตามสัญญา): "),e("span",[t._v(t._s(t.SET_DATEFORMAT(t.local.modelData.start_date)))])]),t._v(" "),e("div",[t._v("กำหนดเสร็จ (ตามสัญญา): "),e("span",[t._v(t._s(t.SET_DATEFORMAT(t.local.modelData.end_date)))])]),t._v(" "),e("div",[t._v("เสร็จจริง: "),e("span",[t._v(t._s(t.SET_DATEFORMAT(t.local.modelData.real_date)))])]),t._v(" "),e("div",[t._v("ล่าช้า: "),e("span",[t._v(t._s(t.local.modelData.delay)+" (วัน)")])]),t._v(" "),e("div",[t._v("สถานะ: "),e("span",[t._v(t._s(t.GET_STATUSNAME(t.local.modelData.status)))])])]):t._e()])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("th",[this._v("งวด")]),this._v(" "),a("th",[this._v("งาน")]),this._v(" "),a("th",[this._v("เสร็จสิ้น")])])}]};var m=e("VU/8")(v,_,!1,function(t){e("iRc7")},"data-v-b32a5b98",null);a.default=m.exports},iRc7:function(t,a){},mZsO:function(t,a){},uvJ5:function(t,a,e){"use strict";var s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:["modal",{"is-active":t.isActive}]},[e("div",{staticClass:"modal-background",on:{click:function(a){t.closeModel()}}}),t._v(" "),e("div",{staticClass:"modal-content"},[t._t("default")],2)])},staticRenderFns:[]};var n=e("VU/8")({props:{},components:{},name:"Model",data:function(){return{isActive:!1}},computed:{},created:function(){},methods:{closeModel:function(){this.isActive=!1}}},s,!1,function(t){e("mZsO")},null,null);a.a=n.exports}});
//# sourceMappingURL=4.c5087c19d6160a9a9bf2.js.map