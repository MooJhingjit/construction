webpackJsonp([25],{yn8l:function(t,e){},"zbB/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=a("Xxa5"),s=a.n(c),n=a("exGp"),r=a.n(n),o=a("ujS/"),i=a("ikD4"),l=a("kVPM"),d=a("7x59"),u={props:{},components:{breadcrumbBar:o.a,myAction:d.a},name:"WorkOrderPage",data:function(){return{local:{pageObj:{items:[{name:"ลำดับการทำงาน",route:"Workorder",key:"",active:!0,icon:"fa fa-tasks"}],template:{class:"work-order-page"}},workOrderObj:{},projectType:[],projectTypeSelected:1}}},computed:{},created:function(){this.getProjectType(),this.fetchData()},methods:{fetchData:function(){var t=this,e=""+l.a.api.workOrder.index,a=this.BUILDPARAM({projectType:this.local.projectTypeSelected});i.a.getResource({resourceName:e,queryString:a}).then(function(e){200===e.status&&(t.local.workOrderObj=e.data)}).catch(function(){})},getProjectType:function(){var t=this;return r()(s.a.mark(function e(){var a,c,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.a.api.project.type,c=[],e.next=4,i.a.getResource({resourceName:a,queryString:c});case 4:n=e.sent,t.local.projectType=n.data.map(function(t){return{key:t.id,name:t.name}});case 6:case"end":return e.stop()}},e,t)}))()},addItem:function(){var t=this,e={projectType:this.local.projectTypeSelected},a=""+l.a.api.workOrder.index;i.a.postResource({data:e,resourceName:a}).then(function(e){200===e.status&&t.GOTOPAGE("EditWorkorder",e.data.id)}).catch(function(t){console.log(t)})},selectProject:function(t){this.local.projectTypeSelected=t,this.fetchData()}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{class:["section",t.local.pageObj.template.class]},[a("breadcrumb-bar",{attrs:{dataObj:t.local.pageObj}}),t._v(" "),a("div",{staticClass:"container-block"},[a("div",{staticClass:"detail-panel"},[[a("div",{staticClass:"container-block  detail-block"},[a("div",{staticClass:"c-header container-block block"},[a("div",{staticClass:"columns"},t._l(t.local.projectType,function(e,c){return a("div",{key:c,staticClass:"column"},[a("button",{class:["button",{"is-active":t.local.projectTypeSelected===e.key}],on:{click:function(a){t.selectProject(e.key)}}},[t._v(" "+t._s(e.name))])])}))]),t._v(" "),a("div",{staticClass:"c-body"},[a("div",{staticClass:"items"},[a("table",{staticClass:"table rows-table is-hoverable"},[t._m(0),t._v(" "),a("tbody",t._l(t.local.workOrderObj,function(e,c){return a("tr",{key:c},[a("td",[t._v(t._s(e.time))]),t._v(" "),a("td",t._l(e.tasks,function(e,c){return a("div",{key:c,staticClass:"list"},[t._v(t._s(e.name))])})),t._v(" "),a("td",t._l(e.tasks,function(e,c){return a("div",{key:c,staticClass:"list"},[t._v(t._s(e.material_group_name))])})),t._v(" "),a("td",[a("button",{staticClass:"button is-outlined",on:{click:function(a){t.GOTOPAGE("EditWorkorder",e.id)}}},[t._v("แก้ไขงวดที่ "+t._s(e.time))])])])}))]),t._v(" "),t.local.workOrderObj.length<10?a("div",{staticClass:"container-block footer-panel"},[a("my-action",{attrs:{type:"update",obj:{title:"เพิ่มงวด"}},on:{clickEvent:function(e){t.addItem()}}})],1):t._e()])])])]],2)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("งวด")]),this._v(" "),e("th",[this._v("รายละเอียดงาน")]),this._v(" "),e("th",[this._v("กลุ่มวัสดุจัดซื้อ")]),this._v(" "),e("th")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-block empty-panel"},[a("div",{staticClass:"block container-block"},[a("div",{staticClass:"block no-data"},[t._v("\n                ไม่พบข้อมูลที่ต้องการ\n            ")]),t._v(" "),a("div",{staticClass:"block select-data"},[a("i",{staticClass:"fa fa-hand-o-left",attrs:{"aria-hidden":"true"}}),t._v(" "),a("span",[t._v("เลือกข้อมูลทางซ้ายมือเพื่อแสดง")])]),t._v(" "),a("div",{staticClass:"block or"},[t._v("\n              หรือ\n            ")]),t._v(" "),a("div",{staticClass:"block add-data"},[a("button",{staticClass:"button"},[t._v("เพิ่มข้อมูลใหม่")])])])])}]};var p=a("VU/8")(u,v,!1,function(t){a("yn8l")},null,null);e.default=p.exports}});
//# sourceMappingURL=25.bda69604b50251029b1b.js.map