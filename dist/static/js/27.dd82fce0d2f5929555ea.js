webpackJsonp([27],{ofAs:function(t,e){},w0sy:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=a("Xxa5"),n=a.n(c),s=a("exGp"),r=a.n(s),o=a("NHnr"),i=a("ujS/"),l=a("O/8C"),u=a("ikD4"),d=a("kVPM"),f=a("Tdo9"),p=a("STNA"),_={props:{},components:{breadcrumbBar:i.a,optionDetailTemplate:l.a,myAutoComplete:f.a,contractSerach:p.a},name:"FrontSitePage",data:function(){return{local:{pageObj:{items:[{name:"ไชต์งานหลัก",route:"FrontSite",key:"",active:!0,icon:"fa fa-home"}]},contracts:[],contractsTemp:[],contractSelection:{inputs:[],selected:null}}}},computed:{},created:function(){o.bus.$on("getOrderingStatus",this.getOrderingStatus),this.fetchData()},methods:{fetchData:function(){var t=this;return r()(n.a.mark(function e(){var a,c,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.a.api.frontSite.index,c=[],e.next=4,u.a.getResource({resourceName:a,queryString:c});case 4:s=e.sent,t.local.contractsTemp=s.data,t.prepareSearch();case 7:case"end":return e.stop()}},e,t)}))()},getOrderingStatus:function(){var t=this;return r()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:t.contractSelectedHandle({code:t.local.contractSelection.selected});case 3:case"end":return e.stop()}},e,t)}))()},prepareSearch:function(){this.local.contractSelection.inputs=this.local.contractsTemp.map(function(t){return{code:t.code,project_id:t.project_id,project_name:t.project.name,plan:t.plan,house_id:t.house_id}})},contractSelectedHandle:function(t){null===t?this.local.contracts=[]:(this.local.contractSelection.selected=t.code,this.local.contracts=this.local.contractsTemp.filter(function(e){return e.code===t.code}))},getStatusClass:function(t){return["tag",{"is-warning":"wait"===t},{"is-info":"confirmed"===t},{"is-success":"received"===t}]}},beforeDestroy:function(){o.bus.$off("getOrderingStatus",this.getOrderingStatus)}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section front-site-page"},[a("breadcrumb-bar",{attrs:{dataObj:t.local.pageObj}}),t._v(" "),a("div",{staticClass:"container-block"},[a("div",{staticClass:"search"},[a("contract-serach",{attrs:{dataObj:t.local.contractSelection.inputs},on:{select:t.contractSelectedHandle}})],1),t._v(" "),t._l(t.local.contracts,function(e,c){return a("article",{key:c,staticClass:"tile is-child notification"},[a("div",{staticClass:"project-name"},[t._v(t._s(e.project.name))]),t._v(" "),a("div",{staticClass:"project-detail container-block"},[a("div",{staticClass:"block"},[t._v("เลขที่สัญญา: "+t._s(e.code))]),t._v(" "),a("div",{staticClass:"block"},[t._v("แบบบ้าน: "+t._s(e.house_id)+"("+t._s(e.plan)+")")])]),t._v(" "),a("div",{staticClass:"next-task"},[a("table",{staticClass:"table is-narrow"},[t._m(0,!0),t._v(" "),a("tbody",t._l(e.ordering,function(e,c){return a("tr",{key:c},[a("td",[t._v(t._s(e.storeType))]),t._v(" "),a("td",[t._v(t._s(e.amount))]),t._v(" "),a("td",[a("span",{class:t.getStatusClass(e.status)},[t._v(t._s(t.GET_STATUSNAME(e.status)))])])])}))])]),t._v(" "),a("div",{staticClass:"actions container-block"},[a("button",{staticClass:"button is-info block",on:{click:function(a){t.GOTOPAGE("FrontSiteUpdate",e.id)}}},[t._v("สถานะงาน")]),t._v(" "),a("button",{staticClass:"button is-warning block",on:{click:function(a){t.GOTOPAGE("FrontSiteVerify",e.id)}}},[t._v("ตรวจสอบงวดงาน")])])])})],2)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th",[this._v("รายการสั่งซื้อ")]),this._v(" "),e("th",[this._v("จำนวน")]),this._v(" "),e("th",[this._v("สถานะ")])])}]};var h=a("VU/8")(_,v,!1,function(t){a("ofAs")},"data-v-1a6b19f1",null);e.default=h.exports}});
//# sourceMappingURL=27.dd82fce0d2f5929555ea.js.map