webpackJsonp([20],{BsAW:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("Xxa5"),r=t.n(s),n=t("exGp"),i=t.n(n),l=t("Dd8w"),o=t.n(l),c=t("ikD4"),u=t("kVPM"),d=t("NYxO"),p={props:{},components:{},name:"LoginPage",data:function(){return{local:{username:null,password:null,inValid:!1}}},methods:o()({},Object(d.b)(["setUserData"]),{submit:function(){this.login()},login:function(){var a=this;return i()(r.a.mark(function e(){var t,s,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$validator.validateAll();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return t=u.a.api.login,s={username:a.local.username,password:a.local.password},e.prev=7,e.next=10,c.a.postResource({resourceName:t,data:s});case 10:n=e.sent,a.SETAUTH(n.data.token),a.getUserData(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),a.local.inValid=!0;case 18:case"end":return e.stop()}},e,a,[[7,15]])}))()},getUserData:function(){var a=this;return i()(r.a.mark(function e(){var t,s,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.a.api.app.resource,s=a.BUILDPARAM([]),e.next=4,c.a.getResource({resourceName:t,queryString:s});case 4:200===(n=e.sent).status&&(a.setUserData(n.data.userData),a.SERUSERDATA(n.data.userData),a.REDIRECTTOHOME());case 6:case"end":return e.stop()}},e,a)}))()}})},v={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("section",{staticClass:"section login-page"},[t("div",{staticClass:"container-block"},[t("div",{staticClass:"block container-block"},[a._m(0),a._v(" "),t("div",{staticClass:"block container-block login-form"},[t("div",{staticClass:"input-form block"},[t("span",{staticClass:"alert"},[a._v(a._s(a.errors.has("username")||a.local.inValid?"โปรดตรวจสอบข้อมูลข้างต้น":""))]),a._v(" "),t("div",{staticClass:"control has-icons-left"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:a.local.username,expression:"local.username"}],staticClass:"input",attrs:{name:"username",type:"text",placeholder:"ชื่อผู้ใช้"},domProps:{value:a.local.username},on:{input:function(e){e.target.composing||a.$set(a.local,"username",e.target.value)}}}),a._v(" "),a._m(1)]),a._v(" "),t("span",{staticClass:"alert"},[a._v(a._s(a.errors.has("password")||a.local.inValid?"โปรดตรวจสอบข้อมูลข้างต้น":""))]),a._v(" "),t("div",{staticClass:"control has-icons-left"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:a.local.password,expression:"local.password"}],staticClass:"input",attrs:{name:"password",type:"password",placeholder:"รหัสผ่าน"},domProps:{value:a.local.password},on:{input:function(e){e.target.composing||a.$set(a.local,"password",e.target.value)}}}),a._v(" "),a._m(2)])]),a._v(" "),t("div",{staticClass:"block submit"},[t("button",{staticClass:"button",on:{click:function(e){a.submit()}}},[a._v("เข้าสู่ระบบ")])])])])])])},staticRenderFns:[function(){var a=this.$createElement,e=this._self._c||a;return e("div",{staticClass:"block header"},[e("h1",{staticClass:"title is-1"},[this._v("บริษัท โชคชนายุทธ จำกัด")])])},function(){var a=this.$createElement,e=this._self._c||a;return e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}})])},function(){var a=this.$createElement,e=this._self._c||a;return e("span",{staticClass:"icon is-small is-left"},[e("i",{staticClass:"fa fa-key",attrs:{"aria-hidden":"true"}})])}]};var m=t("VU/8")(p,v,!1,function(a){t("Ca28")},"data-v-5f9a5814",null);e.default=m.exports},Ca28:function(a,e){}});
//# sourceMappingURL=20.bdc41a6959aaa65f3b2c.js.map